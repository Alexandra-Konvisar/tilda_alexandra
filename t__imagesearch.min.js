function tis__drawMenu(containerid){var html='<div class="tis-is-popup-menu"><button class="tis-is-popup-close" onclick="tis__hideImageSearch()"><img src="https://front.tildacdn.com/ccimagesearch/img/back_icon.svg"><span>'+("RU"==window.lang?"Вернуться":"Back")+'</span></button><button class="tis-is-popup-menu__item tis-is-popup-menu__item_active" data-tab="unsplash">Unsplash</button><button class="tis-is-popup-menu__item" data-tab="deposit">Depositphotos</button><button class="tis-is-popup-menu__item" data-tab="google">Google</button><button class="tis-is-popup-menu__item" data-tab="linea">Linea.io</button><button class="tis-is-popup-menu__item" data-tab="tilda">Tilda Icons</button><button class="tis-is-popup-menu__item" data-tab="instagram">Instagram</button></div><div id="deposit" class="tis-is-tab-pane"></div><div id="unsplash" class="tis-is-tab-pane tis-is-tab-pane_active"></div><div id="google" class="tis-is-tab-pane"></div><div id="linea" class="tis-is-tab-pane"></div><div id="tilda" class="tis-is-tab-pane"></div><div id="instagram" class="tis-is-tab-pane"></div>';$(containerid).empty().append(html)}function tis__drawContent(){var id=tis__getActiveTabId(),functionName="tis__draw"+id[0].toUpperCase()+id.slice(1),tabEmpty;$("#"+id).is(":empty")&&window[functionName]()}var tis__sticky_pos=0,tis__main_data=[],tis__nav_data=[],tis__new_data=[],tis__eof=!1,tis__rel_eof=!1,tis__nav_rel=!1,tis__english_rexp=/^$|^[A-Za-z\s]*$/,tis__request,tis__link,tis__imgid,tis__userid,tis__userhash;function tis__showImageSearch(tildaupload,imgid,user_id,user_hash){tis__imgid=imgid,null===tis__userid&&(tis__userid=user_id),null===tis__userhash&&(tis__userhash=user_hash),$(".tis-is-popup").length||(tis__drawPopup(),tis__drawMenu(".tis-is-popup"),tis__drawContent(),tis__registerDocumentEvents(tildaupload)),"undefined"!=typeof edrec__keyUpFunc&&$(document).off("keyup",edrec__keyUpFunc),$("body").addClass("tis-noscroll"),$(".tis-is-popup").show()}function tis__hideImageSearch(){$("body").removeClass("tis-noscroll"),tis__request=null,tis__link=null,tis__emptyCurrentTab(),$(document).off("keyup",tis__escPopup),"undefined"!=typeof edrec__keyUpFunc&&$(document).on("keyup",edrec__keyUpFunc),$(".tis-is-popup").hide(),$(".tis-is-popup").remove()}function tis__escPopup(e){if(27==e.keyCode)return $(".tis-i-max-modal").is(":visible")?tis__closeImage():tis__hideImageSearch(),!1}function tis__drawPopup(){var html='<div class="tis-is-popup" id="tis-popup"></div>';$("body").append(html)}function tis__updateModalHeight(){var tab=tis__getActiveTabId(),gutter=50,$modal_main=$("#"+tab+" .tis-i-max-modal__main"),$modal_image=$("#"+tab+" .tis-i-max-modal__image");$(".tis-i-max-modal__icon").length?$modal_main.css("height","700px"):($modal_main.css("height",$modal_image.height()+50),$modal_image.show(),$(".tis-img-spinner").hide())}function tis__showIcon(){$(".tis-i-max-modal__main").css("height","700px"),$(".tis-i-max-modal__icon").show(),$(".tis-img-spinner").hide()}function tis__stickyScrollToggle(){var tab=tis__getActiveTabId(),$popup=$(".tis-is-popup-main"),$input=$("#"+tab+" .tis-input"),$categories=$("#"+tab+" .tis-imagesearch-categories"),$header=$("#"+tab+" .tis-is-popup-header"),$form=$("#"+tab+" .tis-imagesearch__term");tis__sticky_pos||(tis__sticky_pos=$("#"+tab+" .tis-imagesearch__term")[0].offsetTop);var scroll=$popup.scrollTop(),shift=scroll-tis__sticky_pos;scroll>tis__sticky_pos?($header.addClass("tis-is-popup-header_sticky"),$form.addClass("tis-form_sticky"),$input.addClass("tis-input_sticky"),$categories.addClass("tis-imagesearch-categories_sticky")):($header.removeClass("tis-is-popup-header_sticky"),$form.removeClass("tis-form_sticky"),$input.removeClass("tis-input_sticky"),$categories.removeClass("tis-imagesearch-categories_sticky"))}function tis__showClearIconIfNeeded(){var tab=tis__getActiveTabId(),$input=$("#"+tab+" .tis-input"),$clear_button=$("#"+tab+" .tis-input-clear-button");""!=$input.val()?$clear_button.show():$clear_button.hide()}function tis__clearSearchInput(){var tab=tis__getActiveTabId(),$input=$("#"+tab+" .tis-input");$input.val(""),$input.trigger("focus"),$(".tis-imagesearch__help-label").removeClass("tis-imagesearch__help-label_visible"),tis__showClearIconIfNeeded()}function tis__openImageModal(){$(".tis-i-max-modal").show()}function tis__closeImage(){var tab=tis__getActiveTabId();tis__rel_data=[],tis__rel_eof=!1,tis__nav_rel=!1;var $gallery=$("#"+tab+" .tis-gallery-related-grid").masonry();$gallery.masonry("remove",$("#"+tab+" .tis-gallery-related-image-container")),$gallery.masonry("layout"),$("#"+tab+" .tis-icon-gallery-related__grid").empty(),$("#"+tab+" .tis-i-max-modal").scrollTop(0),$("#"+tab+" .tis-i-max-modal").hide()}function tis__getHtmlForImageDeposit(src,className,maximize,utm,i){var tag,html;return'<div class="'+className+'" onclick="'+maximize+'" data-id="'+i+'" data-tag="'+(src.id||"")+'" data-author="'+(src.author||"")+'" data-author-link="'+(src.authorLink||"")+utm+'" data-img-src="'+src.url_big+'" data-original-src="'+src.itemurl+utm+'"><img src="'+src.thumb_huge+'" class="tis-gallery-image"><div class="tis-gallery-image-overlay"><img src="https://front.tildacdn.com/ccimagesearch/img/maximize_icon.svg" class="tg-gallery-icon-resize"></div><button class="tis-gallery-select-button" data-media-id="'+src.id+'" data-src="'+src.url_big+'">'+("RU"===window.lang?"Выбрать":"Select")+"</button></div>"}function tis__getHtmlForImage(src,className,maximize,utm,i){var tag,html;return'<div class="'+className+'" onclick="'+maximize+'" data-id="'+i+'" data-tag="'+((src.terms?src.terms.split(",")[0]:src.title)||"")+'" data-author="'+(src.author||"")+'" data-author-link="'+(src.authorLink||"")+utm+'" data-img-src="'+src.link+'" data-original-src="'+src.image.contextLink+utm+'"><img src="'+src.image.thumbnailLink+'" class="tis-gallery-image"><div class="tis-gallery-image-overlay"><img src="https://front.tildacdn.com/ccimagesearch/img/maximize_icon.svg" class="tg-gallery-icon-resize"><button class="tis-gallery-select-button" data-src="'+src.link+'">'+("RU"===window.lang?"Выбрать":"Select")+"</button></div></div>"}function tis__getHtmlForImageGoogle(src,className,maximize,utm,i){var tag,html;return'<div class="'+className+'" onclick="'+maximize+'" data-id="'+i+'" data-tag="'+((src.terms?src.terms.split(",")[0]:src.title)||"")+'" data-author="'+(src.author||"")+'" data-author-link="'+(src.authorLink||"")+utm+'" data-img-src="'+src.link+'" data-original-src="'+src.image.contextLink+utm+'"><img src="'+src.image.link+'" class="tis-gallery-image"><div class="tis-gallery-image-overlay"><img src="https://front.tildacdn.com/ccimagesearch/img/maximize_icon.svg" class="tg-gallery-icon-resize"><button class="tis-gallery-select-button" data-src="'+src.link+'">'+("RU"===window.lang?"Выбрать":"Select")+"</button></div></div>"}function tis__getHtmlForIcon(src,className,maximize,i){var html;return'<div class="'+className+'" onclick="'+maximize+'" data-img-src="'+src.link+'" data-category="'+src.categories.substr(0,src.categories.indexOf(","))+'" data-tags="'+src.terms+'" data-id="'+i+'"><div class="tis-icon-gallery__icon" style="background-image: url('+src.link+');"></div><div class="tis-gallery-icon-overlay"><button class="tis-icon-select-button" data-src="'+src.link+'">'+("RU"===window.lang?"Выбрать":"Select")+"</button></div></div>"}function tis__registerDocumentEvents(tildaupload){$("#tis-popup").click((function(event){$(event.target).hasClass("tis-i-max-modal")&&tis__closeImage()})),$("#tis-popup").on("click",".tis-is-popup-menu__item",(function(e){tis__emptyCurrentTab(),$(document).on("keyup",tis__escPopup),$(window).on("resize",t_throttle(tis__updateModalHeight)),$(".tis-is-popup-menu__item_active").removeClass("tis-is-popup-menu__item_active"),$(this).addClass("tis-is-popup-menu__item_active"),$(".tis-is-tab-pane").removeClass("tis-is-tab-pane_active"),$("#"+$(this).data("tab")).addClass("tis-is-tab-pane_active"),$(".tis-gallery-grid").masonry("layout"),$(".tis-is-popup").scrollTop(0),tis__drawContent(),0!==$(".tis-imagesearch__term").length&&(tis__sticky_pos=$(".tis-imagesearch__term")[0].offsetTop)})),$("#tis-popup").on("submit",".tis-imagesearch__term",(function(e){e.preventDefault();var tab=tis__getActiveTabId();$(".tis-is-popup-main").scrollTop(0);var get_data_fname="tis__get"+tab[0].toUpperCase()+tab.slice(1)+"Data";window[get_data_fname]()})),$("#tis-popup").on("click",".tis-i-max-modal__select-button",(function(e){if(e.preventDefault(),"deposit"===tis__getActiveTabId()){var mediaId=$(".tis-i-max-modal__image").attr("data-tag");$(e.currentTarget).css({position:"relative",background:"#f0f0f0"}).html('&nbsp;<div class="js-loadicon" style="margin: 0; padding: 0; display: block; position: absolute; top: calc(50% - 16px); left: calc(50% - 16px);"></div>'),$.ajax({type:"POST",url:"https://imagesearch.tildacdn.com/api/getdepositphotoslinkbyid/",data:{media_id:mediaId,user_id:tis__userid,user_hash:tis__userhash},dataType:"json",success:function(r){"ok"===r.status&&(tis__link=r.data,tildaupload.uploadFileFromURL(tis__link),tis__hideImageSearch())},error:function(xhr){var ts_delta=Date.now()-ts;0==xhr.status&&ts_delta<100?console.log("Request error. Please check internet connection."):console.log("Request timeout")},complete:function(xhr){tis__request=null},timeout:6e4})}else tis__link=$(".tis-i-max-modal__image").attr("src")||$(".tis-i-max-modal__icon").attr("src"),tildaupload.uploadFileFromURL(tis__link),tis__hideImageSearch()})),$("#tis-popup").on("click",".tis-gallery-select-button, .tis-icon-select-button",(function(e){if(e.preventDefault(),"deposit"===tis__getActiveTabId()){var mediaId=$(this).attr("data-media-id");tis__closeImage(),$.ajax({type:"POST",url:"https://imagesearch.tildacdn.com/api/getdepositphotoslinkbyid/",data:{media_id:mediaId,user_id:tis__userid,user_hash:tis__userhash},dataType:"json",success:function(r){"ok"===r.status&&(tis__link=r.data,tildaupload.uploadFileFromURL(tis__link),tis__hideImageSearch(),$(window).on("resize",t_throttle(tis__updateModalHeight)),$(document).on("keyup",tis__escPopup))},error:function(xhr){var ts_delta=Date.now()-ts;0==xhr.status&&ts_delta<100?console.log("Request error. Please check internet connection."):console.log("Request timeout")},complete:function(xhr){tis__request=null},timeout:6e4})}else tis__link=$(this).data("src"),tildaupload.uploadFileFromURL(tis__link),tis__hideImageSearch(),$(window).on("resize",t_throttle(tis__updateModalHeight)),$(document).on("keyup",tis__escPopup)}))}function tis__emptyCurrentTab(){var tab=tis__getActiveTabId();data=[],data_rel=[],tis__eof=!1,tis__rel_eof=!1,tis__nav_rel=!1,$(window).off("resize"),$(document).off("keyup"),$(".tis-is-popup").off("scroll"),$("#"+tab).empty()}function tis__getActiveTabId(){return $(".tis-is-popup-menu__item_active").data("tab")}function tis__getImageDataObject(img){var $img=$(img),img_data;return{img_src:$img.data("img-src"),id:$img.data("id"),tag:$img.data("tag"),author_link:$img.data("author-link"),author:$img.data("author"),original_src:$img.data("original-src"),carousel:$img.data("carousel")}}function tis__drawGoogle(){var html='<div class="tis-is-popup-main" onscroll="tis__stickyScrollToggle()"><div class="tis-is-popup-header"><h1 class="tis-imagesearch__heading">Google</h1><div class="tis-imagesearch__desc">'+("RU"==window.lang?'<a href="https://www.google.ru/imghp" target="_blank" rel="nofollow noopener">Google Images</a> — изображения, найденные в интернете. Все изображения имеют лицензию <a href="https://creativecommons.org/licenses/by/4.0" target="_blank" rel="nofollow noopener">Creative Commons Attribution</a>, что означает, что вы можете копировать, модифицировать, распространять и использовать фотографии бесплатно, включая коммерческое использование. Вы обязаны указать имя автора и ссылку на источник. Мы предоставляем исключительно сервис по поиску фотографий на данном вебсайте. Мы не имеем имущественных или других прав на изображения и не гарантируем отсутствие претензий со стороны правообладателя.':'<a href="https://www.google.ru/imghp" target="_blank" rel="nofollow noopener">Google Images</a> — pictures found on Internet. All pictures are licensed under <a href="https://creativecommons.org/licenses/by/4.0" target="_blank" rel="nofollow noopener">Creative Commons Attribution</a>, which means you can copy and redistribute the material in any medium or format and remix, transform, and build upon the material for any purpose, even commercially. You must give appropriate credit: the name of the creator and a link to the material. We provide only the search service on this website. It no way indicates that we are the owner of property or any other rights of these pictures. We cannot guarantee the lack of copyright holder claim.')+'</div></div><form class="tis-imagesearch__term" id="google-search-form"><div class="tis-imagesearch-input-wrapper"><img src="https://front.tildacdn.com/ccimagesearch/img/search_icon.svg" class="tis-input-search-icon"><input name="q" type="text" class="tis-input" oninput="tis__showClearIconIfNeeded()"><input type="hidden" name="start" value=""><button class="tis-input-clear-button" onclick="tis__clearSearchInput()" type="button"><img src="https://front.tildacdn.com/ccimagesearch/img/clear_icon.svg" class="tis-input-clear-icon"></button><button type="submit" class="tis-imagesearch__submit">'+("RU"==window.lang?"Поиск":"Search")+'</button></div><p class="tis-imagesearch__help-label">'+("RU"==window.lang?"Используйте английский язык для поиска":"Use English words for search query")+'</p></form><div class="tis-imagesearch-container"><div class="tis-imagesearch__notfound"><img src="https://front.tildacdn.com/ccimagesearch/img/notfound_icon.svg"><p>'+("RU"==window.lang?"К сожалению, ничего не найдено":"Sorry, nothing found.")+'</p></div><div class="tis-imagesearch__unavailable"><img src="https://front.tildacdn.com/ccimagesearch/img/info_gray.svg"><p style="color:#f36969;">'+("RU"==window.lang?"К сожалению, сервис временно недоступен":"Service temporarily unavailable.")+'</p></div><div class="tis-imagesearch__empty-query"><img src="https://front.tildacdn.com/ccimagesearch/img/search_icon.svg"><p>'+("RU"==window.lang?"Введите поисковый запрос":"Enter search query.")+'</p></div><div class="tis-imagesearch__english-only"><img src="https://front.tildacdn.com/ccimagesearch/img/englishonly_icon.svg"><p>'+("RU"==window.lang?"Используйте английский язык для поиска изображений":"Search query must consist only of English letters")+'</p></div><div class="tis-gallery-grid"><div class="tis-gallery-grid-sizer"></div><div class="tis-gallery-gutter-sizer"></div></div><div class="js-loadicon"></div></div></div><div class="tis-i-max-modal"><div class="tis-i-max-modal__content"><div class="tis-i-max-modal__header"><div class="tis-i-max-modal__about"><button class="tis-i-max-modal__info-button"><img src="https://front.tildacdn.com/ccimagesearch/img/info_icon.svg" width="15px"><span>More Info</span></button></div><div class="tis-i-max-modal__actions"><button class="tis-i-max-modal__select-button">'+("RU"==window.lang?"Выбрать":"Select")+'</button><button class="tis-i-max-modal__close-button" onclick="tis__closeImage()"><img src="https://front.tildacdn.com/ccimagesearch/img/im_close_icon.svg" width="12px">'+("RU"==window.lang?"Закрыть":"Close")+'</button></div></div><div class="tis-i-max-modal__main"><div class="tis-img-spinner"></div><div class="tis-i-max-modal__left-click" onclick="tis__showPrevImageGoogle()"><img src="https://front.tildacdn.com/ccimagesearch/img/nav_left_icon.svg" width="40px"></div><div class="tis-i-max-modal__right-click" onclick="tis__showNextImageGoogle()"><img src="https://front.tildacdn.com/ccimagesearch/img/nav_right_icon.svg" width="40px"></div><img class="tis-i-max-modal__image" onload="tis__updateModalHeight()"><input type="hidden" class="tis-start-related"></div><div class="tis-i-max-modal__license">'+("RU"==window.lang?"Мы не гарантируем, что вы можете использовать изображения в абсолютно любых целях, которых хотите. Смотрите ":"We provide only the search service on this website. It no way indicates that we are the owner of property or any other rights of these pictures. We cannot guarantee the lack of copyright holder claim. See ")+'<a class="tis-i-max-modal__source-link" href="#" target="_blank">'+("RU"==window.lang?"первоисточник":"original source")+'</a>.</div><div class="tis-i-max-modal__related"><h1>'+("RU"==window.lang?"Похожие фотографии":"Related photos")+'</h1><div class="tis-gallery-related-grid"><div class="tis-gallery-related-grid-sizer"></div><div class="tis-gallery-related-gutter-sizer"></div></div><div class="js-loadicon"></div></div></div></div>';$("#google").append(html),$(window).on("resize",t_throttle((function(){$("#google .tis-gallery-grid").masonry().masonry("layout"),$("#google .tis-gallery-related-grid").masonry().masonry("layout")}))),$(document).keyup((function(e){return 37==e.keyCode?(tis__showPrevImageGoogle(),!1):39==e.keyCode?(tis__showNextImageGoogle(),!1):void 0})),$("#google-search-form").submit((function(event){$("#google-search-form input[name=start]").val(1)})),$(".tis-is-popup-main").on("scroll",t_throttle((function(){if(!tis__eof&&!tis__request){var bottom_scroll=$(".tis-is-popup-main").scrollTop()+$(document).height()-268,gallery_height=$("#google .tis-gallery-grid").height(),user_height=$(window).height(),delta;Math.floor(gallery_height-bottom_scroll)<2*user_height&&"google"==tis__getActiveTabId()&&tis__getGoogleData()}}))),tis__getGoogleData()}function tis__getGoogleData(){var ts=Date.now(),query=$("#google-search-form input[name=q]").val();if(""!=query){var start=parseInt($("#google-search-form input[name=start]").val());start||(start=1);var per_page=parseInt($("#google-search-form").data("search-pagesize"));per_page||(per_page=10,$("#google-search-form").data("search-pagesize",per_page));var url="https://imagesearch.tildacdn.com/api/getgooglelist/";$("#google .js-loadicon").show(),tis__request=$.ajax({type:"POST",url:url,data:{query:query,start:start,per_page:per_page,user_id:tis__userid,user_hash:tis__userhash},dataType:"json",success:function(r){if("ok"===r.status){if($("#google-search-form input[name=start]").val(start+per_page),r.data.items.length<per_page?$("#google").data("search-total",start+r.data.items.length):$("#google").data("search-total",start+per_page+10),1==start){var $gallery=$("#google .tis-gallery-grid").masonry();$gallery.masonry("remove",$("#google .tis-gallery-image-container")),$gallery.masonry("layout"),tis__eof=!1,tis__main_data=r.data.items,tis__nav_data=[],tis__new_data=[]}else tis__main_data=tis__main_data.concat(r.data.items);r.data.items.length<per_page&&(tis__eof=!0),r.data&&r.data.items.length?(tis__drawGoogleGallery(r.data.items,start),$("#google .tis-gallery-grid").height()<$(window).height()&&tis__getGoogleData()):tis__drawGoogleNotFound()}else"empty_data"===r.status?""==query?tis__drawGoogleEmptyQuery():tis__drawGoogleNotFound():"rate_limit_exceeded"===r.status&&tis__drawGoogleUnavailable()},error:function(xhr){var ts_delta=Date.now()-ts;0==xhr.status&&ts_delta<100?console.log("Request error. Please check internet connection."):console.log("Request timeout"),tis__drawGoogleUnavailable()},complete:function(xhr){tis__request=null,setTimeout((function(){$("#google .js-loadicon").hide()}),100)},timeout:6e4})}else tis__drawGoogleEmptyQuery()}function tis__drawGoogleGallery(items,start){var tab=tis__getActiveTabId(),$gallery=$("#"+tab+" .tis-gallery-grid").masonry(),$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only=$("#"+tab+" .tis-imagesearch__english-only"),$unavailable=$("#"+tab+" .tis-imagesearch__unavailable"),$empty_query=$("#"+tab+" .tis-imagesearch__empty-query");$english_only.css("display","none"),$not_found.css("display","none"),$gallery.css("display","flex"),$unavailable.css("display","none"),$empty_query.css("display","none"),$(".tis-is-popup-main__wrapper").length&&$(".tis-is-popup-header").unwrap();var html="",id;for(var i in items)id=parseInt(start,10)+parseInt(i,10)-1,html+=tis__getHtmlForImageGoogle(items[i],"tis-gallery-image-container","tis__maximizeImageGoogle(this, true)","",id);var $html=$(html);$("#google .tis-gallery-grid").append($html).masonry("appended",$html),$("#google .tis-gallery-grid").imagesLoaded().progress((function(i){$("#google .tis-gallery-grid").masonry({itemSelector:".tis-gallery-image-container",columnWidth:".tis-gallery-grid-sizer",percentPosition:!0,horizontalOrder:!1,gutter:".tis-gallery-gutter-sizer",transitionDuration:0})}))}function tis__updateRowsGoogle(){var row_count=Math.floor($(".tis-gallery-grid").width()/160);$(".tis-gallery-grid-sizer").css("width","calc("+100/row_count+"% - 10px)"),$(".tis-gallery-image-container").css("width","calc("+100/row_count+"% - 10px)"),$(".tis-gallery-image-container").find("img").css("margin-top","10px"),$(".tis-gallery-gutter-sizer").css("width","10px"),$(".tis-gallery-image-overlay").css("height","calc(100% - 10px)"),$(".tis-gallery-image-overlay").css("margin-top","10px")}function tis__maximizeImageGoogle(img,from_main){var data=tis__getImageDataObject(img);from_main||tis__nav_rel||(tis__nav_rel=!0),!from_main&&tis__nav_rel&&(tis__nav_data=tis__new_data),tis__drawMaxImageGoogle(data,from_main)}function tis__drawMaxImageGoogle(img_data,from_main){var $modal_img=$("#google .tis-i-max-modal__image");$("#google .tis-start-related").val(1),$modal_img.attr("src",""),$modal_img.hide(),$(".tis-img-spinner").show(),$modal_img.attr("src",img_data.img_src),$modal_img.data("id",img_data.id),$modal_img.data("tag",img_data.tag),$("#google .tis-i-max-modal__source-link").attr("href",img_data.original_src),$("#google .tis-i-max-modal").scrollTop(0),tis__getGoogleDataRelated(img_data.tag,from_main),tis__openImageModal()}function tis__getGoogleDataRelated(tag,from_main){var ts=Date.now(),$gallery=$("#google .tis-gallery-related-grid").masonry();$gallery.masonry("remove",$("#google .tis-gallery-related-image-container")),$gallery.masonry("layout");var per_page=10,start=parseInt($("#google .tis-start-related").val());start||(start=1);var url="https://imagesearch.tildacdn.com/api/getgooglelist/";$("#google .js-loadicon").show(),tis__request=$.ajax({type:"POST",url:url,data:{query:tag,start:start,per_page:10,user_id:tis__userid,user_hash:tis__userhash},dataType:"json",success:function(r){"ok"===r.status&&($("#google .tis-start-related").val(start+10),tis__new_data=r.data.items,from_main&&(tis__nav_data=tis__new_data),r.data&&r.data.items.length&&tis__drawGoogleRelatedGallery(r.data.items))},error:function(xhr){var ts_delta=Date.now()-ts;0==xhr.status&&ts_delta<100?alert("Request error. Please check internet connection."):alert("Request timeout")},complete:function(xhr){tis__request=null,setTimeout((function(){$("#google .js-loadicon").hide()}),100)},timeout:6e4})}function tis__drawGoogleRelatedGallery(items){var $gallery=$("#google .tis-gallery-related-grid").masonry(),html="";for(var i in items)html+=tis__getHtmlForImageGoogle(items[i],"tis-gallery-related-image-container","tis__maximizeImageGoogleRelated(this, false)","",i);var $html=$(html);$gallery.append($html).masonry("appended",$html),$gallery.imagesLoaded().progress((function(i){$gallery.masonry({itemSelector:".tis-gallery-related-image-container",columnWidth:".tis-gallery-related-grid-sizer",percentPosition:!0,horizontalOrder:!1,gutter:"#google .tis-gallery-related-gutter-sizer",transitionDuration:0})}))}function tis__drawGoogleEnglishOnly(){var tab=tis__getActiveTabId(),$gallery=$("#"+tab+" .tis-gallery-grid"),$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only=$("#"+tab+" .tis-imagesearch__english-only"),$unavailable=$("#"+tab+" .tis-imagesearch__unavailable"),$empty_query=$("#"+tab+" .tis-imagesearch__empty-query");$english_only.css("display","flex"),$unavailable.css("display","none"),$not_found.css("display","none"),$empty_query.css("display","none"),$gallery.css("display","none"),$(".tis-is-popup-main__wrapper").length||$(".tis-is-popup-main").wrapInner('<div class="tis-is-popup-main__wrapper"></div>')}function tis__drawGoogleNotFound(){var tab=tis__getActiveTabId(),$gallery=$("#"+tab+" .tis-gallery-grid"),$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only=$("#"+tab+" .tis-imagesearch__english-only"),$unavailable=$("#"+tab+" .tis-imagesearch__unavailable"),$empty_query;$("#"+tab+" .tis-imagesearch__empty-query").css("display","none"),$english_only.css("display","none"),$unavailable.css("display","none"),$not_found.css("display","flex"),$gallery.css("display","none"),$(".tis-is-popup-main__wrapper").length||$(".tis-is-popup-main").wrapInner('<div class="tis-is-popup-main__wrapper"></div>')}function tis__drawGoogleUnavailable(){var tab=tis__getActiveTabId(),$gallery=$("#"+tab+" .tis-gallery-grid"),$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only=$("#"+tab+" .tis-imagesearch__english-only"),$unavailable=$("#"+tab+" .tis-imagesearch__unavailable"),$empty_query;$("#"+tab+" .tis-imagesearch__empty-query").css("display","none"),$english_only.css("display","none"),$unavailable.css("display","flex"),$not_found.css("display","none"),$gallery.css("display","none"),$(".tis-input").addClass("tis-input-unavailable"),$(".tis-input").prop("disabled",!0),$(".tis-imagesearch__submit").prop("disabled",!0),$(".tis-input-clear-button").hide(),$(".tis-is-popup-main__wrapper").length||$(".tis-is-popup-main").wrapInner('<div class="tis-is-popup-main__wrapper"></div>')}function tis__drawGoogleEmptyQuery(){var tab=tis__getActiveTabId(),$gallery=$("#"+tab+" .tis-gallery-grid"),$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only=$("#"+tab+" .tis-imagesearch__english-only"),$unavailable=$("#"+tab+" .tis-imagesearch__unavailable"),$empty_query;$("#"+tab+" .tis-imagesearch__empty-query").css("display","flex"),$english_only.css("display","none"),$unavailable.css("display","none"),$not_found.css("display","none"),$gallery.css("display","none"),$(".tis-is-popup-main__wrapper").length||$(".tis-is-popup-main").wrapInner('<div class="tis-is-popup-main__wrapper"></div>')}function tis__showNextImageGoogle(){var $modal_img=$("#google .tis-i-max-modal__image"),cur_data,next_image;cur_data=tis__nav_rel?tis__nav_data:tis__main_data;var cur_index=$modal_img.data("id"),img_data;cur_index==cur_data.length-1&&(cur_index=-1),tis__drawMaxImageGoogle({img_src:(next_image=cur_data[++cur_index]).link,id:cur_index,tag:next_image.title,original_src:next_image.image.contextLink},!1)}function tis__showPrevImageGoogle(){var $modal_img=$("#google .tis-i-max-modal__image"),cur_data,prev_image;cur_data=tis__nav_rel?tis__nav_data:tis__main_data;var cur_index=$modal_img.data("id"),img_data;0==cur_index&&(cur_index=cur_data.length),tis__drawMaxImageGoogle({img_src:(prev_image=cur_data[--cur_index]).link,id:cur_index,tag:prev_image.title,original_src:prev_image.image.contextLink},!1)}function tis__maximizeImageGoogleRelated(item){nav_rel=!0,tis__maximizeImageGoogle(item)}function tis__drawLinea(){var html='<div class="tis-is-popup-main" onscroll="tis__stickyScrollToggle()"><div class="tis-is-popup-header"><h1 class="tis-imagesearch__heading">Linea</h1><div class="tis-imagesearch__desc">'+("RU"==window.lang?'<a href="http://linea.io/" target="_blank" rel="nofollow noopener">Linea.io</a> — коллекция иконок, нарисованных дизайнером Дарио Фернандо. Все изображения имеют лицензию <a href="https://creativecommons.org/licenses/by/4.0" target="_blank" rel="nofollow noopener">Creative Commons Attribution</a>, что означает, что вы можете копировать, модифицировать, распространять и использовать фотографии бесплатно, включая коммерческое использование. Вы обязаны указать имя автора (Dario Ferrando) и ссылку на источник (http://linea.io/). Мы предоставляем исключительно сервис по поиску иконок на данном вебсайте. Мы не имеем имущественных или других прав на изображения и не гарантируем отсутствие претензий со стороны правообладателя.':'<a href="http://linea.io/" target="_blank" rel="nofollow noopener">Linea.io</a> — iconset coded and designed by Dario Ferrando. All icons are licensed under <a href="https://creativecommons.org/licenses/by/4.0" target="_blank" rel="nofollow noopener">Creative Commons Attribution</a>, which means you can copy and redistribute the material in any medium or format and remix, transform, and build upon the material for any purpose, even commercially. You must give appropriate credit: the name of the creator (Dario Ferrando) and a link to the material (http://linea.io/). We provide only the search service on this website. It no way indicates that we are the owner of property or any other rights of these pictures. We cannot guarantee the lack of copyright holder claim.')+'</div></div><form class="tis-imagesearch__term tis-imagesearch__term_no-border-bottom" id="linea-search-form"><div class="tis-imagesearch-input-wrapper"><img src="https://front.tildacdn.com/ccimagesearch/img/search_icon.svg" class="tis-input-search-icon"><input name="q" type="text" class="tis-input" oninput="tis__showClearIconIfNeeded()"><input type="hidden" name="start" value=""><button class="tis-input-clear-button" onclick="tis__clearSearchInput()" type="button"><img src="https://front.tildacdn.com/ccimagesearch/img/clear_icon.svg" class="tis-input-clear-icon"></button><button type="submit" class="tis-imagesearch__submit">'+("RU"==window.lang?"Поиск":"Search")+'</button></div><p class="tis-imagesearch__help-label">'+("RU"==window.lang?"Используйте английский язык для поиска":"Use English words for search query")+'</p></form><div class="tis-imagesearch-categories"></div><div class="tis-imagesearch-container"><div class="tis-imagesearch__notfound"><img src="https://front.tildacdn.com/ccimagesearch/img/notfound_icon.svg"><p>'+("RU"==window.lang?"К сожалению, ничего не найдено":"Sorry, nothing found.")+'</p></div><div class="tis-imagesearch__english-only"><img src="https://front.tildacdn.com/ccimagesearch/img/englishonly_icon.svg"><p>'+("RU"==window.lang?"Используйте английский язык для поиска изображений":"Search query must consist only of English letters")+'</p></div><div class="tis-icon-gallery__grid"></div><div class="js-loadicon"></div></div></div><div class="tis-i-max-modal"><div class="tis-i-max-modal__content"><div class="tis-i-max-modal__header"><div class="tis-i-max-modal__about"><button class="tis-i-max-modal__info-button"><img src="https://front.tildacdn.com/ccimagesearch/img/info_icon.svg" width="15px"><span>More Info</span></button><span class="tis-i-max-modal__tags">'+("RU"==window.lang?"Теги: ":"Tags: ")+'<span class="tis-i-max-modal__tags-value"></span></span></div><div class="tis-i-max-modal__actions"><button class="tis-i-max-modal__select-button">'+("RU"==window.lang?"Выбрать":"Select")+'</button><button class="tis-i-max-modal__close-button" onclick="tis__closeImage()"><img src="https://front.tildacdn.com/ccimagesearch/img/im_close_icon.svg" width="12px">'+("RU"==window.lang?"Закрыть":"Close")+'</button></div></div><div class="tis-i-max-modal__main"><div class="tis-img-spinner"></div><div class="tis-i-max-modal__left-click" onclick="tis__showPrevImageLinea()"><img src="https://front.tildacdn.com/ccimagesearch/img/nav_left_icon.svg" width="40px"></div><div class="tis-i-max-modal__right-click" onclick="tis__showNextImageLinea()"><img src="https://front.tildacdn.com/ccimagesearch/img/nav_right_icon.svg" width="40px"></div><img class="tis-i-max-modal__icon" onload="tis__showIcon()"><input type="hidden" class="tis-start-related"></div><div class="tis-i-max-modal__license">'+("RU"==window.lang?"Мы не гарантируем, что вы можете использовать изображения в абсолютно любых целях, которых хотите. Смотрите ":"We provide only the search service on this website. It no way indicates that we are the owner of property or any other rights of these pictures. We cannot guarantee the lack of copyright holder claim. See ")+'<a class="tis-i-max-modal__source-link" href="http://linea.io" target="_blank" target="_blank">'+("RU"==window.lang?"первоисточник":"original source")+'</a>.</div><div class="tis-i-max-modal__related"><h1>'+("RU"==window.lang?"Похожие иконки":"Related icons")+'</h1><div class="tis-icon-gallery-related__grid"></div><div class="js-loadicon"></div></div></div></div>';$("#linea").append(html),$(document).keyup((function(e){return 37==e.keyCode?(tis__showPrevImageLinea(),!1):39==e.keyCode?(tis__showNextImageLinea(),!1):void 0})),$(".tis-is-popup-main").on("scroll",t_throttle((function(){if(!tis__eof&&!tis__request){var bottom_scroll=$(".tis-is-popup-main").scrollTop()+$(document).height()-268,gallery_height=$("#linea .tis-icon-gallery__grid").height(),user_height=$(window).height(),delta;Math.floor(gallery_height-bottom_scroll)<user_height&&"linea"==tis__getActiveTabId()&&tis__getLineaData()}}))),$("#linea .tis-i-max-modal").on("scroll",t_throttle((function(){if("undefined"==typeof rel_eof&&!tis__request){var bottom_scroll=$("#linea .tis-i-max-modal").scrollTop()+$(document).height(),gallery_height=$("#linea .tis-i-max-modal__content").height(),user_height=$(window).height(),delta=Math.floor(gallery_height-bottom_scroll+100),tag=$(".tis-i-max-modal__icon").data("category");delta<user_height&&tis__getLineaDataRelated(tag)}}))),$("#linea-search-form").submit((function(event){$("#linea-search-form input[name=start]").val(1)})),tis__getLineaData()}function tis__drawLineaGallery(items,start){var tab=tis__getActiveTabId(),$gallery=$("#linea .tis-icon-gallery__grid"),html="",$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only=$("#"+tab+" .tis-imagesearch__english-only"),id;for(i in $english_only.css("display","none"),$not_found.css("display","none"),$gallery.css("display","flex"),$(".tis-is-popup-main__wrapper").length&&$(".tis-is-popup-header").unwrap(),items)id=parseInt(start,10)+parseInt(i,10)-1,html+=tis__getHtmlForIcon(items[i],"tis-icon-gallery__item","tis__maximizeImageLinea(this, true)",id);$gallery.append(html)}function tis__drawLineaRelatedGallery(items,start){var $gallery=$("#linea .tis-icon-gallery-related__grid"),html="",id;for(var i in items)id=parseInt(start,10)+parseInt(i,10)-1,html+=tis__getHtmlForIcon(items[i],"tis-icon-gallery-related__item","tis__maximizeImageLinea(this, false)",id);$gallery.append(html)}function tis__drawLineaCategories(items){var $categories=$("#linea .tis-imagesearch-categories"),html="",text="RU"==window.lang?"Все Иконки":"All Icons";for(var i in items)html+='<div class="tis-imagesearch-categories__item" onclick="tis__searchLineaCategory(\''+items[i]+"')\">"+items[i]+"</div>";$categories.append(html)}function tis__searchLineaCategory(term){$("#linea-search-form input[name=q]").val(term),$("#linea-search-form").submit(),tis__showClearIconIfNeeded()}function tis__drawLineaEnglishOnly(){var tab=tis__getActiveTabId(),$gallery=$("#"+tab+" .tis-icon-gallery__grid"),$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only;$("#"+tab+" .tis-imagesearch__english-only").css("display","flex"),$not_found.css("display","none"),$gallery.css("display","none"),$(".tis-is-popup-main__wrapper").length||$(".tis-is-popup-main").wrapInner('<div class="tis-is-popup-main__wrapper"></div>')}function tis__getLineaData(){var ts=Date.now(),query=$("#linea-search-form input[name=q]").val(),start=parseInt($("#linea-search-form input[name=start]").val());start||(start=1);var per_page=parseInt($("#linea-search-form").data("search-pagesize"));per_page||(per_page=90,$("#linea-search-form").data("search-pagesize",per_page));var firstQuery=$("#linea").data("first-query");if(firstQuery&&1==start&&""==query){var categories;tis__processDataLinea(firstQuery,$("#linea").data("first-query-categories"),start,per_page)}else{var url="https://imagesearch.tildacdn.com/api/getlinealist/";$("#linea .js-loadicon").show(),tis__request=$.ajax({type:"POST",url:url,data:{query:query,start:start,per_page:per_page,lang:window.lang,user_id:tis__userid,user_hash:tis__userhash},dataType:"json",success:function(r){"ok"===r.status&&tis__processDataLinea(r.data.items,r.data.categories,start,per_page)},error:function(xhr){var ts_delta=Date.now()-ts;0==xhr.status&&ts_delta<100?alert("Request error. Please check internet connection."):alert("Request timeout")},complete:function(xhr){tis__request=null,setTimeout((function(){$("#linea .js-loadicon").hide()}),100)},timeout:6e4})}}function tis__processDataLinea(items,categories,start,per_page){$("#linea-search-form input[name=start]").val(start+per_page),$("#linea .tis-imagesearch-categories").is(":empty")&&tis__drawLineaCategories(categories.linea),$("#linea").data("first-query")||$("#linea").data("first-query",items),$("#linea").data("first-query-categories")||$("#linea").data("first-query-categories",categories),items.length<per_page?$("#linea").data("search-total",start+items.length):$("#linea").data("search-total",start+per_page+10),1==start?($("#linea .tis-icon-gallery__grid").empty(),tis__eof=!1,tis__main_data=items,tis__nav_data=[],tis__new_data=[]):tis__main_data=tis__main_data.concat(items),items.length<per_page&&(tis__eof=!0),items.length?tis__drawLineaGallery(items,start):tis__drawLineaNotFound()}function tis__getLineaDataRelated(tag,from_main){var ts=Date.now(),per_page=90,start=parseInt($("#linea .tis-start-related").val());start||(start=1);var url="https://imagesearch.tildacdn.com/api/getlinealist/";$("#linea .js-loadicon").show(),tis__request=$.ajax({type:"POST",url:url,data:{query:tag,start:start,per_page:90,user_id:tis__userid,user_hash:tis__userhash},dataType:"json",success:function(r){"ok"===r.status&&($("#linea .tis-start-related").val(start+90),1==start?($("#linea .tis-icon-gallery-related__grid").empty(),rel_eof=!1,tis__new_data=r.data.items):tis__new_data=tis__new_data.concat(r.data.items),from_main&&(tis__nav_data=tis__new_data),r.data.items.length<90&&(rel_eof=!0),r.data&&r.data.items.length&&tis__drawLineaRelatedGallery(r.data.items,start))},error:function(xhr){var ts_delta=Date.now()-ts;0==xhr.status&&ts_delta<100?alert("Request error. Please check internet connection."):alert("Request timeout")},complete:function(xhr){tis__request=null,setTimeout((function(){$("#linea .js-loadicon").hide()}),100)},timeout:6e4})}function tis__drawLineaNotFound(){var tab=tis__getActiveTabId(),$gallery=$("#"+tab+" .tis-icon-gallery__grid"),$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only;$("#"+tab+" .tis-imagesearch__english-only").css("display","none"),$not_found.css("display","flex"),$gallery.css("display","none"),$(".tis-is-popup-main__wrapper").length||$(".tis-is-popup-main").wrapInner('<div class="tis-is-popup-main__wrapper"></div>')}function tis__maximizeImageLinea(img,from_main){var data=tis__getIconDataObject(img);from_main||tis__nav_rel||(tis__nav_rel=!0),!from_main&&tis__nav_rel&&(tis__nav_data=tis__new_data),tis__drawMaxImageLinea(data,from_main)}function tis__drawMaxImageLinea(img_data,from_main){var $modal_img=$(".tis-i-max-modal__icon");$(".tis-start-related").val(1),$modal_img.attr("src",""),$modal_img.hide(),$(".tis-img-spinner").show(),$modal_img.attr("src",img_data.img_src),$modal_img.data("id",img_data.id),$modal_img.data("category",img_data.category),$(".tis-i-max-modal__tags-value").text(img_data.tags.replace(/,/g,", ").replace(/,\s*$/,"")),$(".tis-i-max-modal").scrollTop(0),tis__getLineaDataRelated(img_data.category,from_main),tis__openImageModal()}function tis__showNextImageLinea(){var $modal_img=$(".tis-i-max-modal__icon"),cur_data,next_image;cur_data=tis__nav_rel?tis__nav_data:tis__main_data;var cur_index=$modal_img.data("id"),img_data;cur_index==cur_data.length-1&&(cur_index=-1),tis__drawMaxImageLinea({img_src:(next_image=cur_data[++cur_index]).link,id:cur_index,tags:next_image.terms,category:next_image.categories.substr(0,next_image.categories.indexOf(","))},!1)}function tis__showPrevImageLinea(){var $modal_img=$(".tis-i-max-modal__icon"),cur_data,prev_image;cur_data=tis__nav_rel?tis__nav_data:tis__main_data;var cur_index=$modal_img.data("id"),img_data;0==cur_index&&(cur_index=cur_data.length),tis__drawMaxImageLinea({img_src:(prev_image=cur_data[--cur_index]).link,id:cur_index,tags:prev_image.terms,category:prev_image.categories.substr(0,prev_image.categories.indexOf(","))},!1)}function tis__getIconDataObject(img){var $img=$(img),img_data;return{img_src:$img.data("img-src"),id:$img.data("id"),tags:$img.data("tags"),category:$img.data("category")}}function tis__drawTilda(){var html='<div class="tis-is-popup-main" onscroll="tis__stickyScrollToggle()"><div class="tis-is-popup-header"><h1 class="tis-imagesearch__heading">Tilda Icons</h1><div class="tis-imagesearch__desc">'+("RU"==window.lang?'<a href="https://tilda.cc/ru/free-icons/" target="_blank">Tilda Icons</a> — коллекция бесплатных иконок от Tilda Publishing. Все иконки вы можете использовать на Тильде в своих личных и коммерческих проектах. Скачать наборы иконок отдельно в формате SVG можно на странице <a href="https://tilda.cc/ru/free-icons/" target="_blank">Tilda Icons</a>. Подробности об условиях использования читайте на <a href="https://tilda.cc/ru/free-icons/license/" target="_blank">странице лицензии</a>.':'<a href="https://tilda.cc/free-icons/" target="_blank" class="tis-imagesearch-link">Tilda Icons</a> is a collection of free icon sets from Tilda Publishing. Feel free to use all icons in your personal and commercial projects. You can download icon sets as SVG files on the <a href="https://tilda.cc/free-icons/" target="_blank">project page</a>. Check out the <a href="https://tilda.cc/free-icons/license/" target="_blank">license agreement</a> for detailed information.')+'</div></div><form class="tis-imagesearch__term tis-imagesearch__term_no-border-bottom" id="tilda-search-form"><div class="tis-imagesearch-input-wrapper"><img src="https://front.tildacdn.com/ccimagesearch/img/search_icon.svg" class="tis-input-search-icon"><input name="q" type="text" class="tis-input" oninput="tis__showClearIconIfNeeded()"><input type="hidden" name="start" value=""><button class="tis-input-clear-button" onclick="tis__clearSearchInput()" type="button"><img src="https://front.tildacdn.com/ccimagesearch/img/clear_icon.svg" class="tis-input-clear-icon"></button><button type="submit" class="tis-imagesearch__submit">'+("RU"==window.lang?"Поиск":"Search")+'</button></div><p class="tis-imagesearch__help-label">'+("RU"==window.lang?"Используйте английский язык для поиска":"Use English words for search query")+'</p></form><div class="tis-imagesearch-categories"></div><div class="tis-imagesearch-container"><div class="tis-imagesearch__notfound"><img src="https://front.tildacdn.com/ccimagesearch/img/notfound_icon.svg"><p>'+("RU"==window.lang?"К сожалению, ничего не найдено":"Sorry, nothing found.")+'</p></div><div class="tis-imagesearch__english-only"><img src="https://front.tildacdn.com/ccimagesearch/img/englishonly_icon.svg"><p>'+("RU"==window.lang?"Используйте английский язык для поиска изображений":"Search query must consist only of English letters")+'</p></div><div class="tis-icon-gallery__grid"></div><div class="js-loadicon"></div></div></div><div class="tis-i-max-modal"><div class="tis-i-max-modal__content"><div class="tis-i-max-modal__header"><div class="tis-i-max-modal__about"><button class="tis-i-max-modal__info-button"><img src="https://front.tildacdn.com/ccimagesearch/img/info_icon.svg" width="15px"><span>More Info</span></button><span class="tis-i-max-modal__tags">'+("RU"==window.lang?"Теги: ":"Tags: ")+'<span class="tis-i-max-modal__tags-value"></span></span></div><div class="tis-i-max-modal__actions"><button class="tis-i-max-modal__select-button">'+("RU"==window.lang?"Выбрать":"Select")+'</button><button class="tis-i-max-modal__close-button" onclick="tis__closeImage()"><img src="https://front.tildacdn.com/ccimagesearch/img/im_close_icon.svg" width="12px">'+("RU"==window.lang?"Закрыть":"Close")+'</button></div></div><div class="tis-i-max-modal__main"><div class="tis-img-spinner"></div><div class="tis-i-max-modal__left-click" onclick="tis__showPrevImageTilda()"><img src="https://front.tildacdn.com/ccimagesearch/img/nav_left_icon.svg" width="40px"></div><div class="tis-i-max-modal__right-click" onclick="tis__showNextImageTilda()"><img src="https://front.tildacdn.com/ccimagesearch/img/nav_right_icon.svg" width="40px"></div><img class="tis-i-max-modal__icon" onload="tis__showIcon()"><input type="hidden" class="tis-start-related"></div><div class="tis-i-max-modal__license">'+("RU"==window.lang?"Мы не гарантируем, что вы можете использовать изображения в абсолютно любых целях, которых хотите. Смотрите ":"We provide only the search service on this website. It no way indicates that we are the owner of property or any other rights of these pictures. We cannot guarantee the lack of copyright holder claim. See ")+'<a class="tis-i-max-modal__source-link" href="'+("RU"==window.lang?"https://tilda.cc/ru/free-icons/license/":"https://tilda.cc/free-icons/license/")+'" target="_blank">'+("RU"==window.lang?"первоисточник":"original source")+'</a>.</div><div class="tis-i-max-modal__related"><h1>'+("RU"==window.lang?"Похожие иконки":"Related icons")+'</h1><div class="tis-icon-gallery-related__grid"></div><div class="js-loadicon"></div></div></div></div>';$("#tilda").append(html),$(document).keyup((function(e){return 37==e.keyCode?(tis__showPrevImageTilda(),!1):39==e.keyCode?(tis__showNextImageTilda(),!1):void 0})),$(".tis-is-popup-main").on("scroll",t_throttle((function(){if(!tis__eof&&!tis__request){var bottom_scroll=$(".tis-is-popup-main").scrollTop()+$(document).height()-268,gallery_height=$("#tilda .tis-icon-gallery__grid").height(),user_height=$(window).height(),delta;Math.floor(gallery_height-bottom_scroll)<3*user_height&&"tilda"==tis__getActiveTabId()&&tis__getTildaData()}}))),$("#tilda .tis-i-max-modal").on("scroll",t_throttle((function(){if(void 0===tis__rel_eof&&!tis__request){var bottom_scroll=$("#tilda .tis-i-max-modal").scrollTop()+$(document).height(),gallery_height=$("#tilda .tis-i-max-modal__content").height(),user_height=$(window).height(),delta;Math.floor(gallery_height-bottom_scroll+100)<user_height&&tis__getTildaDataRelated()}}))),$("#tilda-search-form").submit((function(event){$("#tilda-search-form input[name=start]").val(1)})),tis__getTildaData()}function tis__drawTildaGallery(items,start){var tab=tis__getActiveTabId(),$gallery=$("#tilda .tis-icon-gallery__grid"),html="",$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only=$("#"+tab+" .tis-imagesearch__english-only"),id;for(i in $english_only.css("display","none"),$not_found.css("display","none"),$gallery.css("display","flex"),$(".tis-is-popup-main__wrapper").length&&$(".tis-is-popup-header").unwrap(),items)id=parseInt(start,10)+parseInt(i,10)-1,html+=tis__getHtmlForIcon(items[i],"tis-icon-gallery__item","tis__maximizeImageTilda(this, true)",id);$gallery.append(html)}function tis__drawTildaRelatedGallery(items,start){var $gallery=$("#tilda .tis-icon-gallery-related__grid"),html="",id;for(var i in items)id=parseInt(start,10)+parseInt(i,10)-1,html+=tis__getHtmlForIcon(items[i],"tis-icon-gallery-related__item","tis__maximizeImageTilda(this, false)",id);$gallery.append(html)}function tis__drawTildaCategories(items){var $categories=$("#tilda .tis-imagesearch-categories"),html="",text="RU"==window.lang?"Все Иконки":"All Icons";for(var i in items)html+='<div class="tis-imagesearch-categories__item" onclick="tis__searchTildaCategory(\''+items[i]+"')\">"+items[i]+"</div>";$categories.append(html)}function tis__searchTildaCategory(term){$("#tilda-search-form input[name=q]").val(term),$("#tilda-search-form").submit(),tis__showClearIconIfNeeded()}function tis__drawTildaEnglishOnly(){var tab=tis__getActiveTabId(),$gallery=$("#"+tab+" .tis-icon-gallery__grid"),$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only;$("#"+tab+" .tis-imagesearch__english-only").css("display","flex"),$not_found.css("display","none"),$gallery.css("display","none"),$(".tis-is-popup-main__wrapper").length||$(".tis-is-popup-main").wrapInner('<div class="tis-is-popup-main__wrapper"></div>')}function tis__getTildaData(){var ts=Date.now(),query=$("#tilda-search-form input[name=q]").val(),start=parseInt($("#tilda-search-form input[name=start]").val());start||(start=1);var per_page=parseInt($("#tilda-search-form").data("search-pagesize"));per_page||(per_page=90,$("#tilda-search-form").data("search-pagesize",per_page));var firstQuery=$("#tilda").data("first-query");if(firstQuery&&1==start&&""==query)tis__processDataTilda(firstQuery,start,per_page);else{var url="https://imagesearch.tildacdn.com/api/gettildaiconslist/";$("#tilda .js-loadicon").show(),tis__request=$.ajax({type:"POST",url:url,data:{query:query,start:start,per_page:per_page,lang:window.lang,user_id:tis__userid,user_hash:tis__userhash},dataType:"json",success:function(r){"ok"===r.status&&tis__processDataTilda(r.data.items,start,per_page)},error:function(xhr){var ts_delta=Date.now()-ts;0==xhr.status&&ts_delta<100?alert("Request error. Please check internet connection."):alert("Request timeout")},complete:function(xhr){tis__request=null,setTimeout((function(){$("#tilda .js-loadicon").hide()}),100)},timeout:6e4})}}function tis__processDataTilda(items,start,per_page){var tilda_categories;($("#tilda").data("first-query")||$("#tilda").data("first-query",items),$("#tilda .tis-imagesearch-categories").is(":empty"))&&tis__drawTildaCategories("RU"==window.lang?tis__tilda_categories_ru:tis__tilda_categories_en);$("#tilda-search-form input[name=start]").val(start+per_page),items.length<per_page?$("#tilda").data("search-total",start+items.length):$("#tilda").data("search-total",start+per_page+10),1==start?($("#tilda .tis-icon-gallery__grid").empty(),tis__eof=!1,tis__main_data=items,tis__nav_data=[],tis__new_data=[]):tis__main_data=tis__main_data.concat(items),items.length<per_page&&(tis__eof=!0),items.length?tis__drawTildaGallery(items,start):tis__drawTildaNotFound()}function tis__getTildaDataRelated(tag,from_main){var ts=Date.now(),per_page=90,start=parseInt($("#tilda .tis-start-related").val());start||(start=1);var url="https://imagesearch.tildacdn.com/api/gettildaiconslist/";$("#tilda .js-loadicon").show(),tis__request=$.ajax({type:"POST",url:url,data:{query:tag,start:start,per_page:90,user_id:tis__userid,user_hash:tis__userhash},dataType:"json",success:function(r){"ok"===r.status&&($("#tilda .tis-start-related").val(start+90),1==start?($("#tilda .tis-icon-gallery-related__grid").empty(),tis__rel_eof=!1,tis__new_data=r.data.items):tis__new_data=tis__new_data.concat(r.data.items),from_main&&(tis__nav_data=tis__new_data),r.data.items.length<90&&(tis__rel_eof=!0),r.data&&r.data.items.length&&tis__drawTildaRelatedGallery(r.data.items,start))},error:function(xhr){var ts_delta=Date.now()-ts;0==xhr.status&&ts_delta<100?alert("Request error. Please check internet connection."):alert("Request timeout")},complete:function(xhr){tis__request=null,setTimeout((function(){$("#tilda .js-loadicon").hide()}),100)},timeout:6e4})}function tis__drawTildaNotFound(){var tab=tis__getActiveTabId(),$gallery=$("#"+tab+" .tis-icon-gallery__grid"),$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only;$("#"+tab+" .tis-imagesearch__english-only").css("display","none"),$not_found.css("display","flex"),$gallery.css("display","none"),$(".tis-is-popup-main__wrapper").length||$(".tis-is-popup-main").wrapInner('<div class="tis-is-popup-main__wrapper"></div>')}function tis__maximizeImageTilda(img,from_main){var data=tis__getIconDataObject(img);from_main||tis__nav_rel||(tis__nav_rel=!0),!from_main&&tis__nav_rel&&(tis__nav_data=tis__new_data),tis__drawMaxImageTilda(data,from_main)}function tis__drawMaxImageTilda(img_data,from_main){var $modal_img=$(".tis-i-max-modal__icon");$(".tis-start-related").val(1),$modal_img.attr("src",""),$modal_img.hide(),$(".tis-img-spinner").show(),$modal_img.attr("src",img_data.img_src),$modal_img.data("id",img_data.id),$modal_img.data("category",img_data.category),$(".tis-i-max-modal__tags-value").text(img_data.tags.replace(/,/g,", ").replace(/,\s*$/,"")),$(".tis-i-max-modal").scrollTop(0),tis__getTildaDataRelated(img_data.category,from_main),tis__openImageModal()}function tis__showNextImageTilda(){var $modal_img=$(".tis-i-max-modal__icon"),cur_data,next_image;cur_data=tis__nav_rel?tis__nav_data:tis__main_data;var cur_index=$modal_img.data("id"),img_data;cur_index==cur_data.length-1&&(cur_index=-1),tis__drawMaxImageTilda({img_src:(next_image=cur_data[++cur_index]).link,id:cur_index,tags:next_image.terms,category:next_image.categories.substr(0,next_image.categories.indexOf(","))},!1)}function tis__showPrevImageTilda(){var $modal_img=$(".tis-i-max-modal__icon"),cur_data,prev_image;cur_data=tis__nav_rel?tis__nav_data:tis__main_data;var cur_index=$modal_img.data("id"),img_data;0==cur_index&&(cur_index=cur_data.length),tis__drawMaxImageTilda({img_src:(prev_image=cur_data[--cur_index]).link,id:cur_index,tags:prev_image.terms,category:prev_image.categories.substr(0,prev_image.categories.indexOf(","))},!1)}var tis__tilda_categories_en=["Advertising agency","Barber shop","Basic","Beauty salon","Bullets","Cafe","Car service","Christmas/New Year","Cleaning service","Co-working","Conference","Contacts","Defender of the Fatherland Day","Delivery","Education","Event agency","FinTech","Finances","Fitness centre","Formats","Hostel","Hotel","IT company","Interior design studio","Kids education","Law","Logistics","Medicine","Music class","Photo studio","Printing Service","Professions","Quest","Real estate","Renovation","Restaurant","Social networks","Sport","St. Valentines day","Store","System","Tattoo studio","Tour agency","Travel","Veterinary clinic","Video production","Webinar","Wedding agency","Yoga class"],tis__tilda_categories_ru=["IT Компания","Автосервис","Базовые","Барбершоп","Буллет","Буллеты","Вебинар","Ветеринарная Клиника","Видео Продакшн","День Защитника Отечества","День Святого Валентина","Детское Образование","Доставка","Ивент Агентство","Квест","Клининговая Компания","Коворкинг","Контакты","Конференция","Логистика","Магазин","Медицина","Недвижимость","Образование","Отель","Профессии","Пункты","Путешествие","Рекламное Агентство","Ремонт","Ресторан","Рождество/Новый Год","Салон Красоты","Свадебное Агентство","Системные","Социальные Сети","Спорт","Студия Дизайна Интерьера","Студия Йоги","Тату Студия","Типография","Турагентство","Уроки Музыки","Финансы","Финтех","Фитнес-Центр","Форматы","Фотостудия","Хостел","Юриспруденция"],tis__unsplash_utm="?utm_source=TildaPublishing&utm_medium=referral&utm_campaign=api-credit";function tis__drawUnsplash(){var html='<div class="tis-is-popup-main" onscroll="tis__stickyScrollToggle()"><div class="tis-is-popup-header"><h1 class="tis-imagesearch__heading">Unsplash</h1><div class="tis-imagesearch__desc">'+("RU"==window.lang?'<a href="https://unsplash.com?utm_source=TildaPublishing&utm_medium=referral&utm_campaign=api-credit" target="_blank" rel="nofollow noopener">Unsplash</a> — сайт с коллекцией фотографий под лицензией <a href="https://unsplash.com/license?utm_source=TildaPublishing&utm_medium=referral&utm_campaign=api-credit" target="_blank" rel="nofollow noopener">Unsplash License</a>, что означает, что вы можете копировать, модифицировать, распространять и использовать фотографии бесплатно, включая коммерческое использование, без запроса на разрешение и без обязательного указания автора. Мы предоставляем исключительно сервис по поиску фотографий на данном вебсайте. Мы не имеем имущественных или других прав на изображения и не гарантируем отсутствие претензий со стороны правообладателя.':'<a href="https://unsplash.com?utm_source=TildaPublishing&utm_medium=referral&utm_campaign=api-credit" target="_blank" rel="nofollow noopener">Unsplash</a> is a website  with collection of photos licensed under <a href="https://unsplash.com/license?utm_source=TildaPublishing&utm_medium=referral&utm_campaign=api-credit" target="_blank" rel="nofollow noopener">Unsplash License</a> which means you can copy, modify, distribute and use the photos for free, including commercial purposes, without asking permission from or providing attribution to the photographer or Unsplash. We provide only the search service on this website. It no way indicates that we are the owner of property or any other rights of these pictures. We cannot guarantee the lack of copyright holder claim.')+'</div></div><form class="tis-imagesearch__term" id="unsplash-search-form"><div class="tis-imagesearch-input-wrapper"><img src="https://front.tildacdn.com/ccimagesearch/img/search_icon.svg" class="tis-input-search-icon"><input name="q" type="text" class="tis-input" oninput="tis__showClearIconIfNeeded()"><input type="hidden" name="start" value=""><button class="tis-input-clear-button" onclick="tis__clearSearchInput()" type="button"><img src="https://front.tildacdn.com/ccimagesearch/img/clear_icon.svg" class="tis-input-clear-icon"></button><button type="submit" class="tis-imagesearch__submit">'+("RU"==window.lang?"Поиск":"Search")+'</button></div><p class="tis-imagesearch__help-label">'+("RU"==window.lang?"Используйте английский язык для поиска":"Use English words for search query")+'</p></form><div class="tis-imagesearch-container"><div class="tis-imagesearch__notfound"><img src="https://front.tildacdn.com/ccimagesearch/img/notfound_icon.svg"><p>'+("RU"==window.lang?"К сожалению, ничего не найдено":"Sorry, nothing found.")+'</p></div><div class="tis-imagesearch__english-only"><img src="https://front.tildacdn.com/ccimagesearch/img/englishonly_icon.svg"><p>'+("RU"==window.lang?"Используйте английский язык для поиска изображений":"Search query must consist only of English letters")+'</p></div><div class="tis-gallery-grid"><div class="tis-gallery-grid-sizer"></div><div class="tis-gallery-gutter-sizer"></div></div><div class="js-loadicon"></div></div></div><div class="tis-i-max-modal"><div class="tis-i-max-modal__content"><div class="tis-i-max-modal__header"><div class="tis-i-max-modal__about"><button class="tis-i-max-modal__info-button"><img src="https://front.tildacdn.com/ccimagesearch/img/info_icon.svg" width="15px"><span>More Info</span></button><span class="tis-i-max-modal__author">'+("RU"==window.lang?'Автор: <a class="tis-i-max-modal__author-name" target="_blank">Filip Zrnzević</a> на Unsplash':'Photo by <a class="tis-i-max-modal__author-name" target="_blank">Filip Zrnzević</a> on Unsplash')+'</span></div><div class="tis-i-max-modal__actions"><button class="tis-i-max-modal__select-button">'+("RU"==window.lang?"Выбрать":"Select")+'</button><button class="tis-i-max-modal__close-button" onclick="tis__closeImage()"><img src="https://front.tildacdn.com/ccimagesearch/img/im_close_icon.svg" width="12px">'+("RU"==window.lang?"Закрыть":"Close")+'</button></div></div><div class="tis-i-max-modal__main"><div class="tis-img-spinner"></div><div class="tis-i-max-modal__left-click" onclick="tis__showPrevImageUnsplash()"><img src="https://front.tildacdn.com/ccimagesearch/img/nav_left_icon.svg" width="40px"></div><div class="tis-i-max-modal__right-click" onclick="tis__showNextImageUnsplash()"><img src="https://front.tildacdn.com/ccimagesearch/img/nav_right_icon.svg" width="40px"></div><img class="tis-i-max-modal__image" onload="tis__updateModalHeight()"><input type="hidden" class="tis-start-related"></div><div class="tis-i-max-modal__license">'+("RU"==window.lang?"Мы не гарантируем, что вы можете использовать изображения в абсолютно любых целях, которых хотите. Смотрите ":"We provide only the search service on this website. It no way indicates that we are the owner of property or any other rights of these pictures. We cannot guarantee the lack of copyright holder claim. See ")+'<a class="tis-i-max-modal__source-link" href="#" target="_blank">'+("RU"==window.lang?"первоисточник":"original source")+'</a>.</div><div class="tis-i-max-modal__related"><h1>'+("RU"==window.lang?"Похожие фотографии":"Related photos")+'</h1><div class="tis-gallery-related-grid"><div class="tis-gallery-related-grid-sizer"></div><div class="tis-gallery-related-gutter-sizer"></div></div><div class="js-loadicon"></div></div></div></div>';$("#unsplash").append(html),$(window).on("resize",t_throttle((function(){$("#unsplash .tis-gallery-grid").masonry().masonry("layout"),$("#unsplash .tis-gallery-related-grid").masonry().masonry("layout")}))),$(document).keyup((function(e){return 37==e.keyCode?(tis__showPrevImageUnsplash(),!1):39==e.keyCode?(tis__showNextImageUnsplash(),!1):void 0})),$("#unsplash-search-form").submit((function(event){$("#unsplash-search-form input[name=start]").val(1)})),$("#unsplash-search-form input[name=q]").on("input",(function(){tis__english_rexp.test($("#unsplash-search-form input[name=q]").val())?$(".tis-imagesearch__help-label").removeClass("tis-imagesearch__help-label_visible"):$(".tis-imagesearch__help-label").addClass("tis-imagesearch__help-label_visible")})),$(".tis-is-popup-main").on("scroll",t_throttle((function(){if(!tis__eof&&!tis__request){var bottom_scroll=$(".tis-is-popup-main").scrollTop()+$(document).height()-268,gallery_height=$("#unsplash .tis-gallery-grid").height(),user_height=$(window).height(),delta;Math.floor(gallery_height-bottom_scroll)<3*user_height&&"unsplash"==tis__getActiveTabId()&&tis__getUnsplashData()}}))),$(".tis-i-max-modal").on("scroll",t_throttle((function(){if("undefined"==typeof rel_eof&&!tis__request){var bottom_scroll=$(".tis-i-max-modal").scrollTop()+$(document).height(),gallery_height=$(".tis-i-max-modal__content").height(),user_height=$(window).height(),delta=Math.floor(gallery_height-bottom_scroll+100),tag=$(".tis-i-max-modal__image").data("tag");delta<user_height&&tis__getUnsplashDataRelated(tag)}}))),tis__getUnsplashData()}function tis__getUnsplashData(){var ts=Date.now(),query=$("#unsplash-search-form input[name=q]").val();if(tis__english_rexp.test(query)){var start=parseInt($("#unsplash-search-form input[name=start]").val());start||(start=1);var per_page=parseInt($("#unsplash-search-form").data("search-pagesize"));per_page||(per_page=27,$("#unsplash-search-form").data("search-pagesize",per_page));var firstQuery=$("#unsplash").data("first-query");if(firstQuery&&1==start&&""==query)tis__processDataUnsplash(firstQuery,start,per_page);else{var url="https://imagesearch.tildacdn.com/api/getunsplashlist/";$("#unsplash .js-loadicon").show(),tis__request=$.ajax({type:"POST",url:url,data:{query:query,start:start,per_page:per_page,user_id:tis__userid,user_hash:tis__userhash},dataType:"json",success:function(r){"ok"===r.status&&tis__processDataUnsplash(r.data.items,start,per_page)},error:function(xhr){var ts_delta=Date.now()-ts;0==xhr.status&&ts_delta<100?alert("Request error. Please check internet connection."):alert("Request timeout")},complete:function(xhr){tis__request=null,setTimeout((function(){$("#unsplash .js-loadicon").hide()}),100)},timeout:6e4})}}else tis__drawUnsplashEnglishOnly()}function tis__processDataUnsplash(items,start,per_page){if($("#unsplash-search-form input[name=start]").val(start+per_page),items.length<per_page?$("#unsplash").data("search-total",start+items.length):$("#unsplash").data("search-total",start+per_page+10),1==start){$("#unsplash").data("first-query")||$("#unsplash").data("first-query",items);var $gallery=$("#unsplash .tis-gallery-grid").masonry();$gallery.masonry("remove",$("#unsplash .tis-gallery-image-container")),$gallery.masonry("layout"),tis__eof=!1,tis__main_data=items,tis__nav_data=[],tis__new_data=[]}else tis__main_data=tis__main_data.concat(items);items.length<per_page&&(tis__eof=!0),items.length?tis__drawUnsplashGallery(items,start):tis__drawUnsplashNotFound()}function tis__drawUnsplashGallery(items,start){var tab=tis__getActiveTabId(),$gallery=$("#"+tab+" .tis-gallery-grid").masonry(),$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only;$("#"+tab+" .tis-imagesearch__english-only").css("display","none"),$not_found.css("display","none"),$gallery.css("display","flex"),$(".tis-is-popup-main__wrapper").length&&$(".tis-is-popup-header").unwrap();var html="",id;for(var i in items)id=parseInt(start,10)+parseInt(i,10)-1,html+=tis__getHtmlForImage(items[i],"tis-gallery-image-container","tis__maximizeImageUnsplash(this, true)","?utm_source=TildaPublishing&utm_medium=referral&utm_campaign=api-credit",id);var $html=$(html);$("#unsplash .tis-gallery-grid").append($html).masonry("appended",$html),1==start&&$("#unsplash .tis-gallery-grid").css("opacity",0),$("#unsplash .tis-gallery-grid").imagesLoaded().progress((function(i){$("#unsplash .tis-gallery-grid").masonry({itemSelector:".tis-gallery-image-container",columnWidth:".tis-gallery-grid-sizer",percentPosition:!0,horizontalOrder:!1,gutter:".tis-gallery-gutter-sizer",transitionDuration:0})})),1==start&&$("#unsplash .tis-gallery-grid").imagesLoaded().done((function(){$("#unsplash .tis-gallery-grid").css("opacity",1)}))}function tis__maximizeImageUnsplash(img,from_main){var data=tis__getImageDataObject(img);from_main||tis__nav_rel||(tis__nav_rel=!0),!from_main&&tis__nav_rel&&(tis__nav_data=tis__new_data),tis__drawMaxImageUnsplash(data,from_main)}function tis__drawMaxImageUnsplash(img_data,from_main){var $modal_img=$("#unsplash .tis-i-max-modal__image");$("#unsplash .tis-start-related").val(1),$modal_img.attr("src",""),$modal_img.hide(),$(".tis-img-spinner").show(),$modal_img.attr("src",img_data.img_src),$modal_img.data("id",img_data.id),$modal_img.data("tag",img_data.tag),$("#unsplash .tis-i-max-modal__author-name").attr("href",img_data.author_link),$("#unsplash .tis-i-max-modal__author-name").text(img_data.author),$("#unsplash .tis-i-max-modal__author-link").attr("href","https://unsplash.com/"),$("#unsplash .tis-i-max-modal__source-link").attr("href",img_data.original_src),$("#unsplash .tis-i-max-modal").scrollTop(0),tis__getUnsplashDataRelated(img_data.tag,from_main),tis__openImageModal()}function tis__getUnsplashDataRelated(tag,from_main){var ts=Date.now(),start=parseInt($(".tis-start-related").val()),$gallery=$("#unsplash .tis-gallery-related-grid").masonry(),per_page=27,start;(start=parseInt($("#unsplash .tis-start-related").val()))||(start=1);var url="https://imagesearch.tildacdn.com/api/getunsplashlist/";$("#unsplash .js-loadicon").show(),tis__request=$.ajax({type:"POST",url:url,data:{tag:tag,start:start,per_page:27,user_id:tis__userid,user_hash:tis__userhash},dataType:"json",success:function(r){if("ok"===r.status){if($("#unsplash .tis-start-related").val(start+27),1==start){var $gallery=$(".tis-gallery-related-grid").masonry();$gallery.masonry("remove",$("#unsplash .tis-gallery-related-image-container")),$gallery.masonry("layout"),rel_eof=!1,tis__new_data=r.data.items}else tis__new_data=tis__new_data.concat(r.data.items);from_main&&(tis__nav_data=tis__new_data),r.data.items.length<27&&(rel_eof=!0),r.data&&r.data.items.length&&tis__drawUnsplashRelatedGallery(r.data.items,start)}},error:function(xhr){var ts_delta=Date.now()-ts;0==xhr.status&&ts_delta<100?alert("Request error. Please check internet connection."):alert("Request timeout")},complete:function(xhr){tis__request=null,setTimeout((function(){$("#unsplash .js-loadicon").hide()}),100)},timeout:6e4})}function tis__drawUnsplashRelatedGallery(items,start){var $gallery=$("#unsplash .tis-gallery-related-grid").masonry(),html="",id;for(var i in items)id=parseInt(start,10)+parseInt(i,10)-1,html+=tis__getHtmlForImage(items[i],"tis-gallery-related-image-container","tis__maximizeImageUnsplash(this, false)",tis__unsplash_utm,id);var $html=$(html);$gallery.append($html).masonry("appended",$html),$gallery.imagesLoaded().progress((function(i){$gallery.masonry({itemSelector:".tis-gallery-related-image-container",columnWidth:".tis-gallery-related-grid-sizer",percentPosition:!0,horizontalOrder:!1,gutter:"#unsplash .tis-gallery-related-gutter-sizer",transitionDuration:0})}))}function tis__drawUnsplashEnglishOnly(){var tab=tis__getActiveTabId(),$gallery=$("#"+tab+" .tis-gallery-grid"),$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only;$("#"+tab+" .tis-imagesearch__english-only").css("display","flex"),$not_found.css("display","none"),$gallery.css("display","none"),$(".tis-is-popup-main__wrapper").length||$(".tis-is-popup-main").wrapInner('<div class="tis-is-popup-main__wrapper"></div>')}function tis__drawUnsplashNotFound(){var tab=tis__getActiveTabId(),$gallery=$("#"+tab+" .tis-gallery-grid"),$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only;$("#"+tab+" .tis-imagesearch__english-only").css("display","none"),$not_found.css("display","flex"),$gallery.css("display","none"),$(".tis-is-popup-main__wrapper").length||$(".tis-is-popup-main").wrapInner('<div class="tis-is-popup-main__wrapper"></div>')}function tis__showNextImageUnsplash(){var $modal_img=$("#unsplash .tis-i-max-modal__image"),cur_data,next_image;cur_data=tis__nav_rel?tis__nav_data:tis__main_data;var cur_index=$modal_img.data("id"),img_data;cur_index==cur_data.length-1&&(cur_index=-1),tis__drawMaxImageUnsplash({img_src:(next_image=cur_data[++cur_index]).link,id:cur_index,tag:next_image.terms.split(",")[0],author_link:next_image.authorLink+tis__unsplash_utm,author:next_image.author,original_src:next_image.image.contextLink+tis__unsplash_utm},!1)}function tis__showPrevImageUnsplash(){var $modal_img=$("#unsplash .tis-i-max-modal__image"),cur_data,prev_image;cur_data=tis__nav_rel?tis__nav_data:tis__main_data;var cur_index=$modal_img.data("id"),img_data;0==cur_index&&(cur_index=cur_data.length),tis__drawMaxImageUnsplash({img_src:(prev_image=cur_data[--cur_index]).link,id:cur_index,tag:prev_image.terms.split(",")[0],author_link:prev_image.authorLink+tis__unsplash_utm,author:prev_image.author,original_src:prev_image.image.contextLink+tis__unsplash_utm},!1)}var tis__ig_url="",tis__fb_url="";function tis__drawInstagram(){tis__getInstagramData()}function tis__drawInstagramHeader(username,source,items){var html='<div class="tis-is-popup-main"><div class="tis-is-popup-header"><h1 class="tis-imagesearch__heading">Instagram</h1>'+("instagram"==(source=source||"instagram")?'<div class="tis-ig__desc">'+("RU"==window.lang?'Вы подключены, как <a class="tis-link" href="https://www.instagram.com/'+username+'" id="ig_username" rel="nofollow noopener"></a> к Instagram. <a href="#" class="tis-link js-ig-disconnect">Отключить?</a>':'You are connected as <a class="tis-link" href="https://www.instagram.com/'+username+'" id="ig_username" rel="nofollow noopener"></a> to Instagram. <a href="#" class="tis-link js-ig-disconnect">Disconnect?</a>')+"</div>":'<div class="tis-ig__desc">'+("RU"==window.lang?"Вы подключены, как "+username+' к личной странице Facebook. <a href="#" class="tis-link js-fb-disconnect">Отключить?</a>':"You are connected as "+username+' to the personal Facebook page. <a href="#" class="tis-link js-fb-disconnect">Disconnect?</a>')+"</div>")+'<input name="source" type="hidden" value="instagram"><input name="start" type="hidden" value="1"><input name="next" type="hidden" value="">'+(items?tis__drawFacebookSelect(items):"")+'</div><div class="tis-imagesearch-container"><div class="tis-imagesearch__noaccounts"><img src="https://front.tildacdn.com/ccimagesearch/img/notfound_icon.svg"><p style="text-align: center">'+("RU"==window.lang?"Этой личной Facebook-cтранице не принадлежит ни одной бизнес-страницы.":"This personal Facebook Page has no Business Facebook Pages connected to it.")+'</p><a href="#" class="js-fb-disconnect">'+("RU"==window.lang?"Отключить?":"Disconnect?")+'</a></div><div class="tis-imagesearch__noconnected"><img src="https://front.tildacdn.com/ccimagesearch/img/notfound_icon.svg"><p style="text-align: center">'+("RU"==window.lang?"К этой бизнес-странице Facebook не подключено Instagram-аккаунта.":"This business Facebook Page has no Instagram account connected to it.")+'</p></div><div class="tis-imagesearch__notfound"><img src="https://front.tildacdn.com/ccimagesearch/img/notfound_icon.svg"><p>'+("RU"==window.lang?"К сожалению, ничего не найдено":"Sorry, nothing found.")+'</p></div><div class="tis-imagesearch__unavailable"><img src="https://front.tildacdn.com/ccimagesearch/img/notfound_icon.svg"><p>'+("RU"==window.lang?"К сожалению, сервис недоступен":"Service temporarily unavailable.")+'</p></div><div class="tis-gallery-grid"><div class="tis-gallery-grid-sizer"></div><div class="tis-gallery-gutter-sizer"></div></div><div class="js-loadicon"></div></div></div><div class="tis-i-max-modal"><div class="tis-i-max-modal__content"><div class="tis-i-max-modal__header"><div class="tis-i-max-modal__about"><button class="tis-i-max-modal__info-button"><img src="https://front.tildacdn.com/ccimagesearch/img/info_icon.svg" width="15px"><span>More Info</span></button></div><div class="tis-i-max-modal__actions"><button class="tis-i-max-modal__select-button">'+("RU"==window.lang?"Выбрать":"Select")+'</button><button class="tis-i-max-modal__close-button" onclick="tis__closeImage()"><img src="https://front.tildacdn.com/ccimagesearch/img/im_close_icon.svg" width="12px">'+("RU"==window.lang?"Закрыть":"Close")+'</button></div></div><div class="tis-i-max-modal__main"><div class="tis-img-spinner"></div><div class="tis-i-max-modal__left-click" onclick="tis__showPrevImageInstagram()"><img src="https://front.tildacdn.com/ccimagesearch/img/nav_left_icon.svg" width="40px"></div><div class="tis-i-max-modal__right-click" onclick="tis__showNextImageInstagram()"><img src="https://front.tildacdn.com/ccimagesearch/img/nav_right_icon.svg" width="40px"></div><img class="tis-i-max-modal__image" onload="tis__updateModalHeight()"><input type="hidden" class="tis-start-related"></div><div class="tis-i-max-modal__related" style="display: none"><h1>'+("RU"==window.lang?"Ещё из карусели":"Carousel")+'</h1><div class="tis-gallery-related-grid"><div class="tis-gallery-related-grid-sizer"></div><div class="tis-gallery-related-gutter-sizer"></div></div><div class="js-loadicon"></div></div></div></div>';$("#instagram").append(html),$(window).on("resize",t_throttle((function(){$("#instagram .tis-gallery-grid").masonry().masonry("layout"),$("#instagram .tis-gallery-related-grid").masonry().masonry("layout")}))),$(document).keyup((function(e){return 37==e.keyCode?(tis__showPrevImageInstagram(),!1):39==e.keyCode?(tis__showNextImageInstagram(),!1):void 0})),$(".js-ig-disconnect").on("click",(function(e){e.preventDefault(),tis__disconnectInstagram("instagram")})),$(".js-fb-disconnect").on("click",(function(e){e.preventDefault(),tis__disconnectInstagram("facebook")})),"facebook"===source&&$("select[name=fb_acc]").on("change",(function(){$("input[name=start]").val(1),tis__getInstagramData()})),$("#facebook-search-form").submit((function(event){$("#facebook-search-form input[name=start]").val(1)})),$("#facebook-search-form input[name=q]").on("input",(function(){english.test($("#facebook-search-form input[name=q]").val())?$(".tis-imagesearch__help-label").removeClass("tis-imagesearch__help-label_visible"):$(".tis-imagesearch__help-label").addClass("tis-imagesearch__help-label_visible")})),$(".tis-is-popup-main").on("scroll",t_throttle((function(){if(!tis__eof&&!tis__request){var bottom_scroll=$(".tis-is-popup-main").scrollTop()+$(document).height()-268,gallery_height=$("#instagram .tis-gallery-grid").height(),user_height=$(window).height(),delta;Math.floor(gallery_height-bottom_scroll)<3*user_height&&"instagram"==tis__getActiveTabId()&&tis__getInstagramData()}})))}function tis__drawFacebookSelect(items){var html="";for(var i in html+='<div class="ss-form-group" style="padding-bottom: 30px; margin-bottom: 0px;"><label class="ss-label">'+("RU"==window.lang?"Бизнес-страницы":"Business pages")+'</label><div class="ss-select"><select class="ss-input ss-select" name="fb_acc">',items)html+='<option value="'+items[i].id+'">'+items[i].name+"</option>";return html+="</select></div></div>"}function tis__drawInstagramGallery(items,start){var tab=tis__getActiveTabId(),$gallery=$("#"+tab+" .tis-gallery-grid").masonry(),$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only;$("#"+tab+" .tis-imagesearch__english-only").css("display","none"),$not_found.css("display","none"),$gallery.css("display","flex"),$(".tis-is-popup-main__wrapper").length&&$(".tis-is-popup-header").unwrap();var html="",id;for(var i in items)id=parseInt(start,10)+parseInt(i,10)-1,html+=tis__getHtmlForImageInstagram(items[i],"tis-gallery-image-container","tis__maximizeImageInstagram(this, true)",id);var $html=$(html);$(".tis-gallery-grid").append($html).masonry("appended",$html),$(".tis-gallery-grid").imagesLoaded().progress((function(i){$(".tis-gallery-grid").masonry({itemSelector:".tis-gallery-image-container",columnWidth:".tis-gallery-grid-sizer",percentPosition:!0,horizontalOrder:!1,gutter:".tis-gallery-gutter-sizer",transitionDuration:0})}))}function tis__getInstagramData(account_id,forceFB){var ts=Date.now(),start=parseInt($("input[name=start]").val()),selected_account;selected_account=account_id||$("select[name=fb_acc]").val(),start||(start=1);var per_page=parseInt($("#ig-search-form").data("search-pagesize"));per_page||(per_page=25,$("#ig-search-form").data("search-pagesize",per_page));var url="",next=$("input[name=next]").val();next||(next="");var source=$("input[name=source]").val();source&&""!=source||(source="instagram"),"instagram"!=source||forceFB?("facebook"==source||forceFB)&&(url="https://imagesearch.tildacdn.com/api/instagrambiz/getlist/",source="facebook"):url="https://imagesearch.tildacdn.com/api/instagrambasic/getlist/",1===start&&(next=""),$(".js-loadicon").show(),tis__request=$.ajax({type:"POST",url:url,data:{per_page:per_page,user_id:tis__userid,user_hash:tis__userhash,after:next,account_id:selected_account},dataType:"json",success:function(r){if("ok"===r.status){if(!selected_account&&"facebook"===source)return void tis__getFacebookAccounts();var got_w_video=r.data.data.length;r.data.data=r.data.data.filter((function(item){return"VIDEO"!==item.media_type}));var got_wo_video=r.data.data.length;if(1==start){var $gallery=$(".tis-gallery-grid").masonry();$gallery.masonry("remove",$(".tis-gallery-image-container")),$gallery.masonry("layout"),tis__eof=!1,tis__main_data=r.data.data,tis__nav_data=[],tis__new_data=[]}else tis__main_data=tis__main_data.concat(r.data.data);got_w_video<per_page&&(tis__eof=!0),r.data&&got_w_video?(0==$(".tis-is-popup-header").length&&tis__drawInstagramHeader(r.data.data[0].username,source),$("input[name=start]").val(start+got_wo_video),$("input[name=next]").val(r.data.paging.cursors.after),tis__drawInstagramGallery(r.data.data,start),""===next&&"instagram"===source&&($("#ig_username").text(r.data.data[0].username),$("#ig_username").attr("href","https://www.instagram.com/"+r.data.data[0].username))):(r.data.paging&&$("input[name=next]").val(r.data.paging.cursors.after),0==$(".tis-is-popup-header").length&&tis__drawInstagramHeader(""),0===tis__main_data.filter((function(item){return"VIDEO"!==item.media_type})).length&&tis__drawInstagramNotFound())}else"token_not_found"===r.status?"instagram"===source?(tis__ig_url=r.data.url,$("input[name=source]").val("facebook"),tis__getInstagramData(null,!0)):"facebook"===source&&(tis__fb_url=r.data.url,$("input[name=source]").val("instagram"),tis__drawInstagramLogin(tis__ig_url,tis__fb_url)):"instagram_not_found"===r.status&&tis__drawInstagramNoConnected()},error:function(xhr){var ts_delta=Date.now()-ts;0==xhr.status&&ts_delta<100?alert("Request error. Please check internet connection."):alert("Request timeout")},complete:function(xhr){tis__request=null,setTimeout((function(){$(".js-loadicon").hide()}),100)},timeout:6e4})}function tis__getFacebookAccounts(){var ts=Date.now();$(".js-loadicon").show();var url="https://imagesearch.tildacdn.com/api/instagrambiz/getaccounts/";tis__request=$.ajax({type:"POST",url:url,data:{user_id:tis__userid,user_hash:tis__userhash},dataType:"json",success:function(r){if("token_not_found"===r.status){var message="RU"==window.lang?"Не удается получить список бизнес-страниц Facebook. Попробуйте авторизоваться еще раз.":"Unable to get Facebook business pages list. Try to authorize again.";alert(message),tis__disconnectInstagram("facebook")}else r.data&&r.data.accounts.length?(tis__drawInstagramHeader(r.data.user.name,"facebook",r.data.accounts),$("input[name=source]").val("facebook"),tis__fillFacebookAccounts(r.data.accounts),tis__getInstagramData(r.data.accounts[0].id)):r.data&&0===r.data.accounts.length&&($("#instagram").empty(),tis__drawInstagramHeader(r.data.user.name,"facebook",[]),tis__drawInstagramNoFacebookAccounts())},error:function(xhr){var ts_delta=Date.now()-ts;0==xhr.status&&ts_delta<100?alert("Request error. Please check internet connection."):alert("Request timeout")},complete:function(xhr){tis__request=null,setTimeout((function(){$(".js-loadicon").hide()}),100)},timeout:6e4})}function tis__drawInstagramNoFacebookAccounts(){var tab=tis__getActiveTabId(),$gallery=$("#"+tab+" .tis-gallery-grid"),$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only=$("#"+tab+" .tis-imagesearch__english-only"),$no_accounts;$("#"+tab+" .tis-imagesearch__noaccounts").css("display","flex"),$english_only.css("display","none"),$not_found.css("display","none"),$gallery.css("display","none"),$(".tis-is-popup-main__wrapper").length||$(".tis-is-popup-main").wrapInner('<div class="tis-is-popup-main__wrapper"></div>')}function tis__drawInstagramNotFound(){var tab=tis__getActiveTabId(),$gallery=$("#"+tab+" .tis-gallery-grid"),$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only;$("#"+tab+" .tis-imagesearch__english-only").css("display","none"),$not_found.css("display","none"),$gallery.css("display","none"),$(".tis-is-popup-main__wrapper").length||$(".tis-is-popup-main").wrapInner('<div class="tis-is-popup-main__wrapper"></div>')}function tis__drawInstagramNoConnected(){var tab=tis__getActiveTabId(),$gallery=$("#"+tab+" .tis-gallery-grid"),$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only=$("#"+tab+" .tis-imagesearch__english-only"),$no_accounts=$("#"+tab+" .tis-imagesearch__noaccounts"),$no_connected=$("#"+tab+" .tis-imagesearch__noconnected");$no_accounts.css("display","none"),$english_only.css("display","none"),$not_found.css("display","none"),$gallery.css("display","none"),$no_connected.css("display","flex"),$(".tis-is-popup-main__wrapper").length||$(".tis-is-popup-main").wrapInner('<div class="tis-is-popup-main__wrapper"></div>')}function tis__fillFacebookAccounts(items){}function tis__disconnectInstagram(source){var ts=Date.now();$(".js-loadicon").show();var url="";"facebook"==source?url="https://imagesearch.tildacdn.com/api/instagrambiz/deactivate/":"instagram"==source&&(url="https://imagesearch.tildacdn.com/api/instagrambasic/deactivate/"),tis__request=$.ajax({type:"POST",url:url,data:{user_id:tis__userid,user_hash:tis__userhash},dataType:"json",success:function(r){tis__emptyCurrentTab(),tis__drawInstagram()},error:function(xhr){var ts_delta=Date.now()-ts;0==xhr.status&&ts_delta<100?alert("Request error. Please check internet connection."):alert("Request timeout")},complete:function(xhr){tis__request=null,setTimeout((function(){$(".js-loadicon").hide()}),100)},timeout:6e4})}function tis__drawInstagramLogin(ig_url,fb_url){var html='<div class="tis-is-popup-main"><div style="margin-left: 35px; margin-top: 40px"><h1 class="tis-imagesearch__heading">Instagram</h1><div class="tis-imagesearch__desc">'+("RU"==window.lang?'Подключите свой аккаунт <a href="https://www.instagram.com/" target="_blank" rel="nofollow noopener">Instagram</a> или страницу Facebook, чтобы использовать на Тильде фотографии из своего профиля.':'<a href="https://www.instagram.com/" target="_blank" rel="nofollow noopener">Instagram</a> — connect your Instagram account or Facebook page to use your photos on Tilda')+'</div><a class="tis-imagesearch__fb-btn" onclick="tis__oauth(\''+ig_url+"');\">"+("RU"==window.lang?"Подключить через Instagram":"Connect via Instagram")+'</a><div class="tis-imagesearch__fb-desc" style="max-width: 500px;">'+("RU"==window.lang?"В случае, если Вы хотите подключить только один личный или бизнес-аккаунт Instagram, нажмите на эту кнопку. После нажатия на кнопку откроется окно авторизации, в котором необходимо разрешить приложению доступ к фото.":"If you need to connect only one personal or Business Instagram profile, click this button. Then, grant access to your photos to the app in a pop-up window.")+'</div><a class="tis-imagesearch__fb-btn" onclick="tis__oauth(\''+fb_url+"')\";>"+("RU"==window.lang?"Подключить через Facebook":"Connect via Facebook")+'</a><div class="tis-imagesearch__fb-desc" style="max-width: 500px;">'+("RU"==window.lang?"Если Вы хотите подключить сразу несколько бизнес-аккаунтов Instagram, Вы можете привязать их к бизнес-страницам Facebook, принадлежащим одной личной странице Facebook. Нажмите на эту кнопку для подключения всех бизнес-аккаунтов Instagram, связанных с личной страницей Facebook. После нажатия на кнопку откроется окно авторизации, в котором необходимо разрешить приложению доступ к фото.":"In case you want to connect multiple Business Instagram profiles, you can connect them to Business Facebook Pages that belong to one personal Facebook page. Click this button to connect all Business Instagram profiles linked to personal Facebook Page. Then, grant access to your photos to the app in a pop-up window.")+'</div></div><div class="tis-imagesearch-container"></div></div>';$("#instagram").append(html)}function tis__getHtmlForImageInstagram(src,className,maximize,i,f_carousel){var item,carousel=Array.isArray(src),html;return item=carousel?src[0]:src,!0===f_carousel&&(carousel=!0),'<div class="'+className+'" onclick="'+maximize+'" data-id="'+i+'" data-author="'+(item.username||"")+'" data-img-src="'+item.media_url+'" data-carousel="'+carousel+'"><img src="'+item.media_url+'" class="tis-gallery-image">'+(carousel&&!0!==f_carousel?'<span class="tis-gallery-icon-carousel"></span>':"")+'<div class="tis-gallery-image-overlay"><img src="https://front.tildacdn.com/ccimagesearch/img/maximize_icon.svg" class="tg-gallery-icon-resize"><button class="tis-gallery-select-button" data-src="'+item.media_url+'">'+("RU"===window.lang?"Выбрать":"Select")+"</button></div></div>"}function tis__drawInstagramNotFound(){var tab=tis__getActiveTabId(),$gallery=$("#"+tab+" .tis-gallery-grid"),$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only;$("#"+tab+" .tis-imagesearch__english-only").css("display","none"),$not_found.css("display","flex"),$gallery.css("display","none"),$(".tis-is-popup-main__wrapper").length||$(".tis-is-popup-main").wrapInner('<div class="tis-is-popup-main__wrapper"></div>')}function tis__maximizeImageInstagram(img,from_main){var data=tis__getImageDataObject(img);from_main||tis__nav_rel||(tis__nav_rel=!0),!from_main&&tis__nav_rel&&(tis__nav_data=tis__new_data),tis__drawMaxImageInstagram(data,from_main)}function tis__drawMaxImageInstagram(img_data,from_main){var $modal_img=$(".tis-i-max-modal__image");$(".tis-start-related").val(1),$modal_img.attr("src",""),$modal_img.hide(),$(".tis-img-spinner").show(),$modal_img.attr("src",img_data.img_src),$modal_img.data("id",img_data.id),$modal_img.data("tag",img_data.tag),$modal_img.data("carousel",img_data.carousel),img_data.carousel?(tis__drawInstagramCarouselGallery(tis__main_data[img_data.id],img_data.img_src,img_data.id),$(".tis-i-max-modal__related").show()):(tis__emptyInstagramCarouselGallery(),$(".tis-i-max-modal__related").hide()),$(".tis-i-max-modal__author-name").attr("href",img_data.author_link),$(".tis-i-max-modal__author-name").text(img_data.author),$(".tis-i-max-modal__author-link").attr("href","https://unsplash.com/"),$(".tis-i-max-modal__source-link").attr("href",img_data.original_src),$(".tis-i-max-modal").scrollTop(0),tis__openImageModal()}function tis__showNextImageInstagram(){var $modal_img=$(".tis-i-max-modal__image"),cur_data,next_image,carousel=!1;cur_data=tis__main_data;var cur_index=$modal_img.data("id"),img_data;cur_index==cur_data.length-1&&(cur_index=-1),next_image=cur_data[++cur_index],Array.isArray(next_image)&&(next_image=next_image[0],carousel=!0),tis__drawMaxImageInstagram({img_src:next_image.media_url,id:cur_index,carousel:carousel},!1)}function tis__showPrevImageInstagram(){var $modal_img=$(".tis-i-max-modal__image"),cur_data,prev_image,carousel=!1;cur_data=tis__main_data;var cur_index=$modal_img.data("id"),img_data;0==cur_index&&(cur_index=cur_data.length),prev_image=cur_data[--cur_index],Array.isArray(prev_image)&&(prev_image=prev_image[0],carousel=!0),tis__drawMaxImageInstagram({img_src:prev_image.media_url,id:cur_index,carousel:carousel},!1)}function tis__drawInstagramCarouselGallery(items,src,id){var $gallery=$(".tis-gallery-related-grid").masonry(),html="",id;for(var i in $gallery.masonry("remove",$(".tis-gallery-related-image-container")),$gallery.masonry("layout"),items)items[i].media_url!==src&&(html+=tis__getHtmlForImageInstagram(items[i],"tis-gallery-related-image-container","tis__maximizeImageInstagram(this, false)",id,!0));var $html=$(html);$gallery.append($html).masonry("appended",$html),$gallery.imagesLoaded().progress((function(i){$gallery.masonry({itemSelector:".tis-gallery-related-image-container",columnWidth:".tis-gallery-related-grid-sizer",percentPosition:!0,horizontalOrder:!1,gutter:".tis-gallery-related-gutter-sizer",transitionDuration:0})})),$(".tis-i-max-modal__related").show()}function tis__emptyInstagramCarouselGallery(){var $gallery=$(".tis-gallery-related-grid").masonry();$gallery.masonry("remove",$(".tis-gallery-related-image-container")),$gallery.masonry("layout")}function oauthstart_check(callback){try{var message;if(window.oauthstartwin&&window.oauthstartwin.document)if("OK"===window.oauthstartwin.document.body.innerText)return window.oauthcheck&&clearTimeout(window.oauthcheck),window.oauthcheck=!1,window.oauthstartwin.close(),tis__emptyCurrentTab(),tis__getInstagramData(),!0}catch(e){}window.oauthcheck=window.setTimeout((function(){oauthstart_check(callback)}),200)}function tis__oauth(url,callback,title){var w,h,params="menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes,width="+($(window).width()>700?600:parseInt(.9*$(window).width()))+",height="+($(window).height()>600?600:parseInt(.9*$(window).height()));title&&null!=title||(title="OAuth2 authorization"),window.oauthstartwin=window.open(url,title,params),window.oauthcheck=window.setTimeout((function(){oauthstart_check(callback)}),200)}function tis__updateInstagram(){}function tis__drawDeposit(){var html='<div class="tis-is-popup-main" onscroll="tis__stickyScrollToggle()"><div class="tis-is-popup-header"><h1 class="tis-imagesearch__heading">Depositphotos</h1><div class="tis-imagesearch__desc">'+("RU"==window.lang?'<a href="https://deposit.com?utm_source=TildaPublishing&utm_medium=referral&utm_campaign=api-credit" target="_blank" rel="nofollow noopener">Depositphotos</a> — фотобанк с премиум-коллекцией фотографий, векторов и видео. сайт с коллекцией фотографий под лицензией <a href="https://deposit.com/license?utm_source=TildaPublishing&utm_medium=referral&utm_campaign=api-credit" target="_blank" rel="nofollow noopener">Deposit License</a>, что означает, что вы можете копировать, модифицировать, распространять и использовать фотографии бесплатно, включая коммерческое использование, без запроса на разрешение и без обязательного указания автора. Мы предоставляем исключительно сервис по поиску фотографий на данном вебсайте. Мы не имеем имущественных или других прав на изображения и не гарантируем отсутствие претензий со стороны правообладателя.':'<a href="https://deposit.com?utm_source=TildaPublishing&utm_medium=referral&utm_campaign=api-credit" target="_blank" rel="nofollow noopener">Deposit</a> is a website  with collection of photos licensed under <a href="https://deposit.com/license?utm_source=TildaPublishing&utm_medium=referral&utm_campaign=api-credit" target="_blank" rel="nofollow noopener">Deposit License</a> which means you can copy, modify, distribute and use the photos for free, including commercial purposes, without asking permission from or providing attribution to the photographer or Deposit. We provide only the search service on this website. It no way indicates that we are the owner of property or any other rights of these pictures. We cannot guarantee the lack of copyright holder claim.')+'</div></div><form class="tis-imagesearch__term" id="deposit-search-form"><div class="tis-imagesearch-input-wrapper"><img src="https://front.tildacdn.com/ccimagesearch/img/search_icon.svg" class="tis-input-search-icon"><input name="q" type="text" class="tis-input" oninput="tis__showClearIconIfNeeded()"><input type="hidden" name="start" value=""><button class="tis-input-clear-button" onclick="tis__clearSearchInput()" type="button"><img src="https://front.tildacdn.com/ccimagesearch/img/clear_icon.svg" class="tis-input-clear-icon"></button><button type="submit" class="tis-imagesearch__submit">'+("RU"==window.lang?"Поиск":"Search")+'</button></div><p class="tis-imagesearch__help-label">'+("RU"==window.lang?"Используйте английский язык для поиска":"Use English words for search query")+'</p></form><div class="tis-imagesearch-container"><div class="tis-imagesearch__notfound"><img src="https://front.tildacdn.com/ccimagesearch/img/notfound_icon.svg"><p>'+("RU"==window.lang?"К сожалению, ничего не найдено":"Sorry, nothing found.")+'</p></div><div class="tis-imagesearch__english-only"><img src="https://front.tildacdn.com/ccimagesearch/img/englishonly_icon.svg"><p>'+("RU"==window.lang?"Используйте английский язык для поиска изображений":"Search query must consist only of English letters")+'</p></div><div class="tis-gallery-grid"><div class="tis-gallery-grid-sizer"></div><div class="tis-gallery-gutter-sizer"></div></div><div class="js-loadicon"></div></div></div><div class="tis-i-max-modal"><div class="tis-i-max-modal__content"><div class="tis-i-max-modal__header"><div class="tis-i-max-modal__about"><button class="tis-i-max-modal__info-button"><img src="https://front.tildacdn.com/ccimagesearch/img/info_icon.svg" width="15px"><span>More Info</span></button><span class="tis-i-max-modal__author"></span></div><div class="tis-i-max-modal__actions"><button class="tis-i-max-modal__select-button">'+("RU"==window.lang?"Выбрать":"Select")+'</button><button class="tis-i-max-modal__close-button" onclick="tis__closeImage()"><img src="https://front.tildacdn.com/ccimagesearch/img/im_close_icon.svg" width="12px">'+("RU"==window.lang?"Закрыть":"Close")+'</button></div></div><div class="tis-i-max-modal__main"><div class="tis-img-spinner"></div><div class="tis-i-max-modal__left-click" onclick="tis__showPrevImageDeposit()"><img src="https://front.tildacdn.com/ccimagesearch/img/nav_left_icon.svg" width="40px"></div><div class="tis-i-max-modal__right-click" onclick="tis__showNextImageDeposit()"><img src="https://front.tildacdn.com/ccimagesearch/img/nav_right_icon.svg" width="40px"></div><img class="tis-i-max-modal__image" onload="tis__updateModalHeight()"><input type="hidden" class="tis-start-related"></div><div class="tis-i-max-modal__license">'+("RU"==window.lang?"Мы не гарантируем, что вы можете использовать изображения в абсолютно любых целях, которых хотите. Смотрите ":"We provide only the search service on this website. It no way indicates that we are the owner of property or any other rights of these pictures. We cannot guarantee the lack of copyright holder claim. See ")+'<a class="tis-i-max-modal__source-link" href="#" target="_blank">'+("RU"==window.lang?"первоисточник":"original source")+'</a>.</div><div class="tis-i-max-modal__related"><h1>'+("RU"==window.lang?"Похожие фотографии":"Related photos")+'</h1><div class="tis-gallery-related-grid"><div class="tis-gallery-related-grid-sizer"></div><div class="tis-gallery-related-gutter-sizer"></div></div><div class="js-loadicon"></div></div></div></div>';$("#deposit").append(html),$(window).on("resize",t_throttle((function(){$("#deposit .tis-gallery-grid").masonry().masonry("layout"),$("#deposit .tis-gallery-related-grid").masonry().masonry("layout")}))),$(document).keyup((function(e){return 37==e.keyCode?(tis__showPrevImageDeposit(),!1):39==e.keyCode?(tis__showNextImageDeposit(),!1):void 0})),$("#deposit-search-form").submit((function(event){$("#deposit-search-form input[name=start]").val(1)})),$(".tis-is-popup-main").on("scroll",t_throttle((function(){if(!tis__eof&&!tis__request){var bottom_scroll=$(".tis-is-popup-main").scrollTop()+$(document).height()-268,gallery_height=$("#deposit .tis-gallery-grid").height(),user_height=$(window).height(),delta;Math.floor(gallery_height-bottom_scroll)<3*user_height&&"deposit"==tis__getActiveTabId()&&tis__getDepositData()}}))),$(".tis-i-max-modal").on("scroll",t_throttle((function(){if("undefined"==typeof rel_eof&&!tis__request){var bottom_scroll=$(".tis-i-max-modal").scrollTop()+$(document).height(),gallery_height=$(".tis-i-max-modal__content").height(),user_height=$(window).height(),delta=Math.floor(gallery_height-bottom_scroll+100),tag=$(".tis-i-max-modal__image").data("tag");delta<user_height&&tis__getDepositDataRelated(tag)}}))),tis__getDepositData()}function tis__getDepositData(){var ts=Date.now(),query=$("#deposit-search-form input[name=q]").val(),start=parseInt($("#deposit-search-form input[name=start]").val());start||(start=1);var per_page=parseInt($("#deposit-search-form").data("search-pagesize"));per_page||(per_page=25,$("#deposit-search-form").data("search-pagesize",per_page));var firstQuery=$("#deposit").data("first-query");if(firstQuery&&1==start&&""==query)tis__processDataDeposit(firstQuery,start,per_page);else{var url="https://imagesearch.tildacdn.com/api/getdepositphotoslist/";$("#deposit .tis-imagesearch__notfound").hide(),$("#deposit .js-loadicon").show(),tis__request=$.ajax({type:"POST",url:url,data:{query:query,start:start,per_page:per_page,user_id:tis__userid,user_hash:tis__userhash},dataType:"json",success:function(r){"ok"===r.status&&tis__processDataDeposit(r.data.items,start,per_page)},error:function(xhr){var ts_delta=Date.now()-ts;0==xhr.status&&ts_delta<100?alert("Request error. Please check internet connection."):alert("Request timeout")},complete:function(xhr){tis__request=null,setTimeout((function(){$("#deposit .js-loadicon").hide()}),100)},timeout:6e4})}}function tis__processDataDeposit(items,start,per_page){if($("#deposit-search-form input[name=start]").val(start+items.length),items.length<per_page?$("#deposit").data("search-total",start+items.length):$("#deposit").data("search-total",start+per_page+10),1==start){$("#deposit").data("first-query")||$("#deposit").data("first-query",items);var $gallery=$("#deposit .tis-gallery-grid").masonry();$gallery.masonry("remove",$("#deposit .tis-gallery-image-container")),$gallery.masonry("layout"),tis__eof=!1,tis__main_data=items,tis__nav_data=[],tis__new_data=[]}else tis__main_data=tis__main_data.concat(items);0==items.length&&(tis__eof=!0),items.length||1!=start?tis__drawDepositGallery(items,start):tis__drawDepositNotFound()}function tis__drawDepositGallery(items,start){var tab=tis__getActiveTabId(),$gallery=$("#"+tab+" .tis-gallery-grid").masonry(),$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only;$("#"+tab+" .tis-imagesearch__english-only").css("display","none"),$not_found.css("display","none"),$gallery.css("display","flex"),$(".tis-is-popup-main__wrapper").length&&$(".tis-is-popup-header").unwrap();var html="",id;for(var i in items)id=parseInt(start,10)+parseInt(i,10)-1,html+=tis__getHtmlForImageDeposit(items[i],"tis-gallery-image-container","tis__maximizeImageDeposit(this, true)","?utm_source=TildaPublishing&utm_medium=referral&utm_campaign=api-credit",id);var $html=$(html);$("#deposit .tis-gallery-grid").append($html).masonry("appended",$html),1==start&&$("#deposit .tis-gallery-grid").css("opacity",0),$("#deposit .tis-gallery-grid").imagesLoaded().progress((function(i){$("#deposit .tis-gallery-grid").masonry({itemSelector:".tis-gallery-image-container",columnWidth:".tis-gallery-grid-sizer",percentPosition:!0,horizontalOrder:!1,gutter:".tis-gallery-gutter-sizer",transitionDuration:0})})),1==start&&$("#deposit .tis-gallery-grid").imagesLoaded().done((function(){$("#deposit .tis-gallery-grid").css("opacity",1)}))}function tis__maximizeImageDeposit(img,from_main){var data=tis__getImageDataObject(img);from_main||tis__nav_rel||(tis__nav_rel=!0),!from_main&&tis__nav_rel&&(tis__nav_data=tis__new_data),tis__drawMaxImageDeposit(data,from_main)}function tis__drawMaxImageDeposit(img_data,from_main){var $modal_img=$("#deposit .tis-i-max-modal__image");$("#deposit .tis-start-related").val(1),$modal_img.attr("src",""),$modal_img.hide(),$(".tis-img-spinner").show(),$modal_img.attr("src",img_data.img_src),$modal_img.data("id",img_data.id),$modal_img.attr("data-tag",img_data.tag),$("#deposit .tis-i-max-modal__author-name").attr("href",img_data.author_link),$("#deposit .tis-i-max-modal__author-name").text(img_data.author),$("#deposit .tis-i-max-modal__author-link").attr("href","https://deposit.com/"),$("#deposit .tis-i-max-modal__source-link").attr("href",img_data.original_src),$("#deposit .tis-i-max-modal").scrollTop(0),tis__getDepositDataRelated(img_data.tag,from_main),tis__openImageModal()}function tis__getDepositDataRelated(tag,from_main){var ts=Date.now(),start=parseInt($(".tis-start-related").val()),$gallery=$("#deposit .tis-gallery-related-grid").masonry(),per_page=27,start;(start=parseInt($("#deposit .tis-start-related").val()))||(start=1);var url="https://imagesearch.tildacdn.com/api/getdepositphotoslist/";$("#deposit .tis-i-max-modal__related").show(),$("#deposit .js-loadicon").show(),tis__request=$.ajax({type:"POST",url:url,data:{tag:tag,start:start,per_page:27,user_id:tis__userid,user_hash:tis__userhash},dataType:"json",success:function(r){if("ok"===r.status){if($("#deposit .tis-start-related").val(start+r.data.items.length),1==start){var $gallery=$(".tis-gallery-related-grid").masonry();$gallery.masonry("remove",$("#deposit .tis-gallery-related-image-container")),$gallery.masonry("layout"),rel_eof=!1,tis__new_data=r.data.items}else tis__new_data=tis__new_data.concat(r.data.items);from_main&&(tis__nav_data=tis__new_data),0==r.data.items.length&&(rel_eof=!0,$("#deposit .tis-i-max-modal__related").hide()),r.data&&r.data.items.length&&tis__drawDepositRelatedGallery(r.data.items,start)}},error:function(xhr){var ts_delta=Date.now()-ts;0==xhr.status&&ts_delta<100?alert("Request error. Please check internet connection."):alert("Request timeout")},complete:function(xhr){tis__request=null,setTimeout((function(){$("#deposit .js-loadicon").hide()}),100)},timeout:6e4})}function tis__drawDepositRelatedGallery(items,start){var $gallery=$("#deposit .tis-gallery-related-grid").masonry(),html="",id;for(var i in items)id=parseInt(start,10)+parseInt(i,10)-1,html+=tis__getHtmlForImageDeposit(items[i],"tis-gallery-related-image-container","tis__maximizeImageDeposit(this, false)","",id);var $html=$(html);$gallery.append($html).masonry("appended",$html),$gallery.imagesLoaded().progress((function(i){$gallery.masonry({itemSelector:".tis-gallery-related-image-container",columnWidth:".tis-gallery-related-grid-sizer",percentPosition:!0,horizontalOrder:!1,gutter:"#deposit .tis-gallery-related-gutter-sizer",transitionDuration:0})}))}function tis__drawDepositEnglishOnly(){var tab=tis__getActiveTabId(),$gallery=$("#"+tab+" .tis-gallery-grid"),$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only;$("#"+tab+" .tis-imagesearch__english-only").css("display","flex"),$not_found.css("display","none"),$gallery.css("display","none"),$(".tis-is-popup-main__wrapper").length||$(".tis-is-popup-main").wrapInner('<div class="tis-is-popup-main__wrapper"></div>')}function tis__drawDepositNotFound(){var tab=tis__getActiveTabId(),$gallery=$("#"+tab+" .tis-gallery-grid"),$not_found=$("#"+tab+" .tis-imagesearch__notfound"),$english_only;$("#"+tab+" .tis-imagesearch__english-only").css("display","none"),$not_found.css("display","flex"),$gallery.css("display","none"),$(".tis-is-popup-main__wrapper").length||$(".tis-is-popup-main").wrapInner('<div class="tis-is-popup-main__wrapper"></div>')}function tis__showNextImageDeposit(){var $modal_img=$("#deposit .tis-i-max-modal__image"),cur_data,next_image;cur_data=tis__nav_rel?tis__nav_data:tis__main_data;var cur_index=$modal_img.data("id"),img_data;cur_index==cur_data.length-1&&(cur_index=-1),tis__drawMaxImageDeposit({img_src:(next_image=cur_data[++cur_index]).url_big,id:cur_index,tag:next_image.id,original_src:next_image.itemurl},!1)}function tis__showPrevImageDeposit(){var $modal_img=$("#deposit .tis-i-max-modal__image"),cur_data,prev_image;cur_data=tis__nav_rel?tis__nav_data:tis__main_data;var cur_index=$modal_img.data("id"),img_data;0==cur_index&&(cur_index=cur_data.length),tis__drawMaxImageDeposit({img_src:(prev_image=cur_data[--cur_index]).url_big,id:cur_index,tag:prev_image.id,original_src:prev_image.itemurl},!1)}
/*!
 * Masonry PACKAGED v4.2.2
 * Cascading grid layout library
 * https://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */!function(t,e){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],(function(i){return e(t,i)})):"object"==typeof module&&module.exports?module.exports=e(t,require("jquery")):t.jQueryBridget=e(t,t.jQuery)}(window,(function(t,e){"use strict";function i(i,r,a){function h(t,e,n){var o,r="$()."+i+'("'+e+'")';return t.each((function(t,h){var u=a.data(h,i);if(u){var d=u[e];if(d&&"_"!=e.charAt(0)){var l=d.apply(u,n);o=void 0===o?l:o}else s(r+" is not a valid method")}else s(i+" not initialized. Cannot call methods, i.e. "+r)})),void 0!==o?o:t}function u(t,e){t.each((function(t,n){var o=a.data(n,i);o?(o.option(e),o._init()):(o=new r(n,e),a.data(n,i,o))}))}(a=a||e||t.jQuery)&&(r.prototype.option||(r.prototype.option=function(t){a.isPlainObject(t)&&(this.options=a.extend(!0,this.options,t))}),a.fn[i]=function(t){if("string"==typeof t){var e=o.call(arguments,1);return h(this,t,e)}return u(this,t),this},n(a))}function n(t){!t||t&&t.bridget||(t.bridget=i)}var o=Array.prototype.slice,r=t.console,s=void 0===r?function(){}:function(t){r.error(t)};return n(e||t.jQuery),i})),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,(function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},n;return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],o=0;o<i.length;o++){var r=i[o],s;n&&n[r]&&(this.off(t,r),delete n[r]),r.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t})),function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",e):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,(function(){"use strict";function t(t){var e=parseFloat(t),i;return-1==t.indexOf("%")&&!isNaN(e)&&e}function e(){}function i(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;u>e;e++){var i;t[h[e]]=0}return t}function n(t){var e=getComputedStyle(t);return e||a("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),e}function o(){if(!d){d=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var i=document.body||document.documentElement;i.appendChild(e);var o=n(e);s=200==Math.round(t(o.width)),r.isBoxSizeOuter=s,i.removeChild(e)}}function r(e){if(o(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var r=n(e);if("none"==r.display)return i();var a={};a.width=e.offsetWidth,a.height=e.offsetHeight;for(var d=a.isBorderBox="border-box"==r.boxSizing,l=0;u>l;l++){var c=h[l],f=r[c],m=parseFloat(f);a[c]=isNaN(m)?0:m}var p=a.paddingLeft+a.paddingRight,g=a.paddingTop+a.paddingBottom,y=a.marginLeft+a.marginRight,v=a.marginTop+a.marginBottom,_=a.borderLeftWidth+a.borderRightWidth,z=a.borderTopWidth+a.borderBottomWidth,E=d&&s,b=t(r.width);!1!==b&&(a.width=b+(E?0:p+_));var x=t(r.height);return!1!==x&&(a.height=x+(E?0:g+z)),a.innerWidth=a.width-(p+_),a.innerHeight=a.height-(g+z),a.outerWidth=a.width+y,a.outerHeight=a.height+v,a}}var s,a="undefined"==typeof console?e:function(t){console.error(t)},h=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],u=h.length,d=!1;return r})),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,(function(){"use strict";var t=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n,o=e[i]+"MatchesSelector";if(t[o])return o}}();return function(e,i){return e[t](i)}})),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],(function(i){return e(t,i)})):"object"==typeof module&&module.exports?module.exports=e(t,require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.matchesSelector)}(window,(function(t,e){var i={extend:function(t,e){for(var i in e)t[i]=e[i];return t},modulo:function(t,e){return(t%e+e)%e}},n=Array.prototype.slice;i.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==typeof t&&"number"==typeof t.length?n.call(t):[t];var e},i.removeFrom=function(t,e){var i=t.indexOf(e);-1!=i&&t.splice(i,1)},i.getParent=function(t,i){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,e(t,i))return t},i.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.filterFindElements=function(t,n){t=i.makeArray(t);var o=[];return t.forEach((function(t){if(t instanceof HTMLElement){if(!n)return void o.push(t);e(t,n)&&o.push(t);for(var i=t.querySelectorAll(n),r=0;r<i.length;r++)o.push(i[r])}})),o},i.debounceMethod=function(t,e,i){i=i||100;var n=t.prototype[e],o=e+"Timeout";t.prototype[e]=function(){var t=this[o];clearTimeout(t);var e=arguments,r=this;this[o]=setTimeout((function(){n.apply(r,e),delete r[o]}),i)}},i.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},i.toDashed=function(t){return t.replace(/(.)([A-Z])/g,(function(t,e,i){return e+"-"+i})).toLowerCase()};var o=t.console;return i.htmlInit=function(e,n){i.docReady((function(){var r=i.toDashed(n),s="data-"+r,a=document.querySelectorAll("["+s+"]"),h=document.querySelectorAll(".js-"+r),u=i.makeArray(a).concat(i.makeArray(h)),d=s+"-options",l=t.jQuery;u.forEach((function(t){var i,r=t.getAttribute(s)||t.getAttribute(d);try{i=r&&JSON.parse(r)}catch(a){return void(o&&o.error("Error parsing "+s+" on "+t.className+": "+a))}var h=new e(t,i);l&&l.data(t,n,h)}))}))},i})),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("get-size")):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))}(window,(function(t,e){"use strict";function i(t){for(var e in t)return!1;return e=null,!0}function n(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}function o(t){return t.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()}))}var r=document.documentElement.style,s="string"==typeof r.transition?"transition":"WebkitTransition",a="string"==typeof r.transform?"transform":"WebkitTransform",h={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[s],u={transform:a,transition:s,transitionDuration:s+"Duration",transitionProperty:s+"Property",transitionDelay:s+"Delay"},d=n.prototype=Object.create(t.prototype);d.constructor=n,d._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},d.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},d.getSize=function(){this.size=e(this.element)},d.css=function(t){var e=this.element.style;for(var i in t){var n;e[u[i]||i]=t[i]}},d.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),n=t[e?"left":"right"],o=t[i?"top":"bottom"],r=parseFloat(n),s=parseFloat(o),a=this.layout.size;-1!=n.indexOf("%")&&(r=r/100*a.width),-1!=o.indexOf("%")&&(s=s/100*a.height),r=isNaN(r)?0:r,s=isNaN(s)?0:s,r-=e?a.paddingLeft:a.paddingRight,s-=i?a.paddingTop:a.paddingBottom,this.position.x=r,this.position.y=s},d.layoutPosition=function(){var t=this.layout.size,e={},i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),o=i?"paddingLeft":"paddingRight",r=i?"left":"right",s=i?"right":"left",a=this.position.x+t[o];e[r]=this.getXValue(a),e[s]="";var h=n?"paddingTop":"paddingBottom",u=n?"top":"bottom",d=n?"bottom":"top",l=this.position.y+t[h];e[u]=this.getYValue(l),e[d]="",this.css(e),this.emitEvent("layout",[this])},d.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},d.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},d._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,o=t==this.position.x&&e==this.position.y;if(this.setPosition(t,e),!o||this.isTransitioning){var r=t-i,s=e-n,a={};a.transform=this.getTranslate(r,s),this.transition({to:a,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},d.getTranslate=function(t,e){var i,n;return"translate3d("+(t=this.layout._getOption("originLeft")?t:-t)+"px, "+(e=this.layout._getOption("originTop")?e:-e)+"px, 0)"},d.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},d.moveTo=d._transitionTo,d.setPosition=function(t,e){this.position.x=parseFloat(t),this.position.y=parseFloat(e)},d._nonTransition=function(t){for(var e in this.css(t.to),t.isCleaning&&this._removeStyles(t.to),t.onTransitionEnd)t.onTransitionEnd[e].call(this)},d.transition=function(t){if(parseFloat(this.layout.options.transitionDuration)){var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);var n=this.element.offsetHeight;n=null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0}else this._nonTransition(t)};var l="opacity,"+o(a);d.enableTransition=function(){if(!this.isTransitioning){var t=this.layout.options.transitionDuration;t="number"==typeof t?t+"ms":t,this.css({transitionProperty:l,transitionDuration:t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(h,this,!1)}},d.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},d.onotransitionend=function(t){this.ontransitionend(t)};var c={"-webkit-transform":"transform"};d.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,n=c[t.propertyName]||t.propertyName,o;if(delete e.ingProperties[n],i(e.ingProperties)&&this.disableTransition(),n in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[n]),n in e.onEnd)e.onEnd[n].call(this),delete e.onEnd[n];this.emitEvent("transitionEnd",[this])}},d.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(h,this,!1),this.isTransitioning=!1},d._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var f={transitionProperty:"",transitionDuration:"",transitionDelay:""};return d.removeTransitionStyles=function(){this.css(f)},d.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},d.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},d.remove=function(){return s&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",(function(){this.removeElem()})),void this.hide()):void this.removeElem()},d.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={},i;e[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},d.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},d.getHideRevealTransitionEndProperty=function(t){var e=this.layout.options[t];if(e.opacity)return"opacity";for(var i in e)return i},d.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={},i;e[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},d.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},d.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},n})),function(t,e){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],(function(i,n,o,r){return e(t,i,n,o,r)})):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):t.Outlayer=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,t.Outlayer.Item)}(window,(function(t,e,i,n,o){"use strict";function r(t,e){var i=n.getQueryElement(t);if(i){this.element=i,u&&(this.$element=u(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(e);var o=++l,r;this.element.outlayerGUID=o,c[o]=this,this._create(),this._getOption("initLayout")&&this.layout()}else h&&h.error("Bad element for "+this.constructor.namespace+": "+(i||t))}function s(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}function a(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),i=e&&e[1],n=e&&e[2],o;return i.length?(i=parseFloat(i))*(m[n]||1):0}var h=t.console,u=t.jQuery,d=function(){},l=0,c={};r.namespace="outlayer",r.Item=o,r.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var f=r.prototype;n.extend(f,e.prototype),f.option=function(t){n.extend(this.options,t)},f._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},r.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},f._create=function(){var t;this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),n.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},f.reloadItems=function(){this.items=this._itemize(this.element.children)},f._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],o=0;o<e.length;o++){var r,s=new i(e[o],this);n.push(s)}return n},f._filterFindItemElements=function(t){return n.filterFindElements(t,this.options.itemSelector)},f.getItemElements=function(){return this.items.map((function(t){return t.element}))},f.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},f._init=f.layout,f._resetLayout=function(){this.getSize()},f.getSize=function(){this.size=i(this.element)},f._getMeasurement=function(t,e){var n,o=this.options[t];o?("string"==typeof o?n=this.element.querySelector(o):o instanceof HTMLElement&&(n=o),this[t]=n?i(n)[e]:o):this[t]=0},f.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},f._getItemsForLayout=function(t){return t.filter((function(t){return!t.isIgnored}))},f._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),t&&t.length){var i=[];t.forEach((function(t){var n=this._getItemLayoutPosition(t);n.item=t,n.isInstant=e||t.isLayoutInstant,i.push(n)}),this),this._processLayoutQueue(i)}},f._getItemLayoutPosition=function(){return{x:0,y:0}},f._processLayoutQueue=function(t){this.updateStagger(),t.forEach((function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)}),this)},f.updateStagger=function(){var t=this.options.stagger;return null==t?void(this.stagger=0):(this.stagger=a(t),this.stagger)},f._positionItem=function(t,e,i,n,o){n?t.goTo(e,i):(t.stagger(o*this.stagger),t.moveTo(e,i))},f._postLayout=function(){this.resizeContainer()},f.resizeContainer=function(){var t;if(this._getOption("resizeContainer")){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},f._getContainerSize=d,f._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},f._emitCompleteOnItems=function(t,e){function i(){o.dispatchEvent(t+"Complete",null,[e])}function n(){++s==r&&i()}var o=this,r=e.length;if(e&&r){var s=0;e.forEach((function(e){e.once(t,n)}))}else i()},f.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;if(this.emitEvent(t,n),u)if(this.$element=this.$element||u(this.element),e){var o=u.Event(e);o.type=t,this.$element.trigger(o,i)}else this.$element.trigger(t,i)},f.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},f.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},f.stamp=function(t){(t=this._find(t))&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},f.unstamp=function(t){(t=this._find(t))&&t.forEach((function(t){n.removeFrom(this.stamps,t),this.unignore(t)}),this)},f._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=n.makeArray(t)):void 0},f._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},f._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},f._manageStamp=d,f._getElementOffset=function(t){var e=t.getBoundingClientRect(),n=this._boundingRect,o=i(t),r;return{left:e.left-n.left-o.marginLeft,top:e.top-n.top-o.marginTop,right:n.right-e.right-o.marginRight,bottom:n.bottom-e.bottom-o.marginBottom}},f.handleEvent=n.handleEvent,f.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},f.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},f.onresize=function(){this.resize()},n.debounceMethod(r,"onresize",100),f.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},f.needsResizeLayout=function(){var t=i(this.element),e;return this.size&&t&&t.innerWidth!==this.size.innerWidth},f.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},f.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},f.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},f.reveal=function(t){if(this._emitCompleteOnItems("reveal",t),t&&t.length){var e=this.updateStagger();t.forEach((function(t,i){t.stagger(i*e),t.reveal()}))}},f.hide=function(t){if(this._emitCompleteOnItems("hide",t),t&&t.length){var e=this.updateStagger();t.forEach((function(t,i){t.stagger(i*e),t.hide()}))}},f.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},f.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},f.getItem=function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(i.element==t)return i}},f.getItems=function(t){t=n.makeArray(t);var e=[];return t.forEach((function(t){var i=this.getItem(t);i&&e.push(i)}),this),e},f.remove=function(t){var e=this.getItems(t);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach((function(t){t.remove(),n.removeFrom(this.items,t)}),this)},f.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach((function(t){t.destroy()})),this.unbindResize();var e=this.element.outlayerGUID;delete c[e],delete this.element.outlayerGUID,u&&u.removeData(this.element,this.constructor.namespace)},r.data=function(t){var e=(t=n.getQueryElement(t))&&t.outlayerGUID;return e&&c[e]},r.create=function(t,e){var i=s(r);return i.defaults=n.extend({},r.defaults),n.extend(i.defaults,e),i.compatOptions=n.extend({},r.compatOptions),i.namespace=t,i.data=r.data,i.Item=s(o),n.htmlInit(i,t),u&&u.bridget&&u.bridget(t,i),i};var m={ms:1,s:1e3};return r.Item=o,r})),function(t,e){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window,(function(t,e){var i=t.create("masonry");i.compatOptions.fitWidth="isFitWidth";var n=i.prototype;return n._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},n.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}var n=this.columnWidth+=this.gutter,o=this.containerWidth+this.gutter,r=o/n,s=n-o%n,a;r=Math[s&&1>s?"round":"floor"](r),this.cols=Math.max(r,1)},n.getContainerWidth=function(){var t,i=this._getOption("fitWidth")?this.element.parentNode:this.element,n=e(i);this.containerWidth=n&&n.innerWidth},n._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,i,n=Math[e&&1>e?"round":"ceil"](t.size.outerWidth/this.columnWidth);n=Math.min(n,this.cols);for(var o,r=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](n,t),s={x:this.columnWidth*r.col,y:r.y},a=r.y+t.size.outerHeight,h=n+r.col,u=r.col;h>u;u++)this.colYs[u]=a;return s},n._getTopColPosition=function(t){var e=this._getTopColGroup(t),i=Math.min.apply(Math,e);return{col:e.indexOf(i),y:i}},n._getTopColGroup=function(t){if(2>t)return this.colYs;for(var e=[],i=this.cols+1-t,n=0;i>n;n++)e[n]=this._getColGroupY(n,t);return e},n._getColGroupY=function(t,e){if(2>e)return this.colYs[t];var i=this.colYs.slice(t,t+e);return Math.max.apply(Math,i)},n._getHorizontalColPosition=function(t,e){var i=this.horizontalColIndex%this.cols,n;i=t>1&&i+t>this.cols?0:i;var o=e.size.outerWidth&&e.size.outerHeight;return this.horizontalColIndex=o?i+t:this.horizontalColIndex,{col:i,y:this._getColGroupY(i,t)}},n._manageStamp=function(t){var i=e(t),n=this._getElementOffset(t),o,r=this._getOption("originLeft")?n.left:n.right,s=r+i.outerWidth,a=Math.floor(r/this.columnWidth);a=Math.max(0,a);var h=Math.floor(s/this.columnWidth);h-=s%this.columnWidth?0:1,h=Math.min(this.cols-1,h);for(var u,d=(this._getOption("originTop")?n.top:n.bottom)+i.outerHeight,l=a;h>=l;l++)this.colYs[l]=Math.max(d,this.colYs[l])},n._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},n._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},n.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},i})),function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,(function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return-1==n.indexOf(t)&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{},n;return(i[e]=i[e]||{})[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return-1!=n&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],o=0;o<i.length;o++){var r=i[o],s;n&&n[r]&&(this.off(e,r),delete n[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e})),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],(function(i){return t(e,i)})):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}("undefined"!=typeof window?window:this,(function(e,t){function i(e,t){for(var i in t)e[i]=t[i];return e}function n(e){return Array.isArray(e)?e:"object"==typeof e&&"number"==typeof e.length?d.call(e):[e];var t}function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);var s=e;return"string"==typeof e&&(s=document.querySelectorAll(e)),s?(this.elements=n(s),this.options=i({},this.options),"function"==typeof t?r=t:i(this.options,t),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(this.check.bind(this))):void a.error("Bad element for imagesLoaded "+(s||e))}function r(e){this.img=e}function s(e,t){this.url=e,this.element=t,this.img=new Image}var h=e.jQuery,a=e.console,d=Array.prototype.slice;o.prototype=Object.create(t.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&u[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=e.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var u={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,e),n=i.exec(t.backgroundImage)}},o.prototype.addImage=function(e){var t=new r(e);this.images.push(t)},o.prototype.addBackground=function(e,t){var i=new s(e,t);this.images.push(i)},o.prototype.check=function(){function e(e,i,n){setTimeout((function(){t.progress(e,i,n)}))}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach((function(t){t.once("progress",e),t.check()})):void this.complete()},o.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,e,t)},o.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},r.prototype=Object.create(t.prototype),r.prototype.check=function(){var e;return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){var e;this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},o.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&((h=t).fn.imagesLoaded=function(e,t){var i;return new o(this,e,t).jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o}));